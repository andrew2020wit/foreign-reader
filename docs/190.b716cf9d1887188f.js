"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[190],{7190:(F,g,s)=>{s.r(g),s.d(g,{HomeComponent:()=>A});var k=s(5933),O=s(9662),d=s(6814),p=s(2296),h=s(4408),u=s(8180),l=s(5195),t=s(5879),f=s(1839),C=s(144);let v=(()=>{class n{constructor(e,o){this.loader=e,this.exportImportService=o,this.update=new t.vpe}readJSONFile(e){const o=e?.target?.files[0];if(!o)return;const r=new FileReader;r.onload=c=>{const i=c?.target?.result;if(!i)return;const m=this.exportImportService.importJsonText(i);m&&(this.loader.start(),m.pipe((0,u.q)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},r.readAsText(o)}readTxtFile(e){const o=e?.target?.files[0];if(!o)return;const r=new FileReader;r.onload=c=>{const i=c?.target?.result;if(!i)return;const m=this.exportImportService.importTextFile(i);m&&(this.loader.start(),m.pipe((0,u.q)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},r.readAsText(o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.D),t.Y36(C.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-import-book"]],outputs:{update:"update"},standalone:!0,features:[t.jDz],decls:12,vars:0,consts:[[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],[1,"copyright"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["jsonFileInput",""],["type","file","accept",".txt",1,"hidden-file-input",3,"change"],["textFileInput",""]],template:function(e,o){if(1&e){const r=t.EpF();t.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),t.NdJ("click",function(){t.CHM(r);const i=t.MAs(11);return t.KtG(i.click())}),t._uU(3,"Open plain txt-file (UTF-8) "),t.qZA(),t.TgZ(4,"button",1),t.NdJ("click",function(){t.CHM(r);const i=t.MAs(9);return t.KtG(i.click())}),t._uU(5,"Import book from json-file"),t.qZA()(),t.TgZ(6,"div",2),t._uU(7," Copyright (c) 2023-2024 Andrii Faurash "),t.qZA()(),t.TgZ(8,"input",3,4),t.NdJ("change",function(i){return o.readJSONFile(i)}),t.qZA(),t.TgZ(10,"input",5,6),t.NdJ("change",function(i){return o.readTxtFile(i)}),t.qZA()}},dependencies:[d.ez,p.ot,p.lW,l.QW,l.a8],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"],changeDetection:0}),n})();var M=s(463),x=s(957);const P=function(n){return["/edit-book-header",n]},T=function(n){return["/book",n]};function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"button",8),t.NdJ("click",function(){const c=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.delete(c.id))}),t._uU(3,"Delete"),t.qZA(),t.TgZ(4,"button",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.export(c))}),t._uU(5,"Export"),t.qZA(),t.TgZ(6,"button",10),t._uU(7,"Edit Title"),t.qZA()(),t.TgZ(8,"button",11),t._uU(9),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(6),t.Q6J("routerLink",t.VKq(3,P,e.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(5,T,e.id)),t.xp6(1),t.hij(" ",e.title," ")}}function Z(n,a){if(1&n&&(t.TgZ(0,"mat-card",2)(1,"div",3)(2,"div",4),t.YNc(3,y,10,7,"div",5),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.booksTitles)}}let w=(()=>{class n{constructor(e,o,r,c,i){this.bookService=e,this.loader=o,this.infoService=r,this.cd=c,this.exportImportService=i,this.booksTitles=[]}ngOnInit(){this.loader.topOn(),this.cd.detectChanges(),this.setTitles()}setTitles(){this.loader.topOn(),this.bookService.getAllTitles$().pipe((0,u.q)(1)).subscribe({next:e=>{this.booksTitles=e,this.booksTitles.sort((o,r)=>(r.lastOpenedTime||0)-(o.lastOpenedTime||0)),this.cd.detectChanges(),this.loader.topOff()},error:e=>{this.loader.topOff(),console.error(e),this.cd.detectChanges()}})}delete(e){this.loader.topOn(),this.bookService.delete$(e).pipe((0,u.q)(1)).subscribe({next:()=>{this.infoService.show("Book deleted"),this.setTitles(),this.loader.topOff()},error:o=>{this.infoService.error("Book not deleted"),console.error(o),this.loader.topOff()}})}export(e){this.exportImportService.export(e.id)}update(){this.setTitles()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.Z),t.Y36(f.D),t.Y36(x.C),t.Y36(t.sBO),t.Y36(C.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-books"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["class","books-block",4,"ngIf"],[3,"update"],[1,"books-block"],[1,"list-wrapper"],[1,"list"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"buttons"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","primary",1,"title",3,"routerLink"]],template:function(e,o){1&e&&(t.YNc(0,Z,4,1,"mat-card",0),t.TgZ(1,"app-import-book",1),t.NdJ("update",function(){return o.update()}),t.qZA()),2&e&&t.Q6J("ngIf",null==o.booksTitles?null:o.booksTitles.length)},dependencies:[d.ez,d.sg,d.O5,l.QW,l.a8,h.rH,p.ot,p.lW,v],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%], [_nghost-%COMP%]   .import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;gap:8px;width:-moz-fit-content;width:fit-content;margin:var(--padding-small)}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"]}),n})(),A=(()=>{class n{constructor(){this.appVersion="1.1.3 betta",this.RoutesEnum=k.X,this.appTitle=O.x}goToHomeSite(){window.open("https://github.com/andrew2020wit/foreign-reader","_blank")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:14,vars:5,consts:[[1,"home-header"],["mat-button","","color","primary",3,"click"],[1,"app-title"],["mat-button","","color","primary",3,"routerLink"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"routerLink"],[1,"books"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.goToHomeSite()}),t._uU(2," About "),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.qZA(),t.TgZ(5,"button",3),t._uU(6," Settings "),t.qZA()(),t.TgZ(7,"mat-card")(8,"div",4)(9,"button",5),t._uU(10," Dictionary Viewer "),t.qZA(),t.TgZ(11,"button",5),t._uU(12," Favorite Examples "),t.qZA()()(),t._UZ(13,"app-books",6)),2&e&&(t.xp6(4),t.AsE(" ",o.appTitle," (v ",o.appVersion,") "),t.xp6(1),t.Q6J("routerLink","/"+o.RoutesEnum.Settings),t.xp6(4),t.Q6J("routerLink","/"+o.RoutesEnum.DictionaryViewer),t.xp6(2),t.Q6J("routerLink","/"+o.RoutesEnum.FavoriteExamples))},dependencies:[d.ez,p.ot,p.lW,h.rH,w,l.QW,l.a8],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--padding-main)}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main);width:100%}"]}),n})()}}]);