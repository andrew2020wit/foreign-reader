"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[199],{5152:(x,g,a)=>{a.d(g,{N:()=>v});var C=a(5619);const d=[{label:"Font size original text (26px)",cssVariable:"--font-size-original-text"},{label:"Font size translation text (24px)",cssVariable:"--font-size-translation-text"},{label:"dictionary-main-font-size",cssVariable:"--dictionary-main-font-size"},{label:"dictionary-header-font-size",cssVariable:"--dictionary-header-font-size"},{label:"Main background color",cssVariable:"--background-color-main"},{label:'background-image, like: url(https://andrew2020wit.github.io/foreign-reader/assets/background/fancy-deboss.png) or "none"',cssVariable:"--book-background-image"},{label:"Accent background color (header)",cssVariable:"--background-color-accent"},{label:"Main font color (original text)",cssVariable:"--font-color-main"},{label:"Translation font color",cssVariable:"--font-color-translation"},{label:"Accent font color (header)",cssVariable:"--font-color-accent"},{label:"Color primary",cssVariable:"--color-primary"},{label:"Color accent",cssVariable:"--color-accent"},{label:"Color warn",cssVariable:"--color-warn"},{label:"Dictionary width",cssVariable:"--dictionary-width"},{label:"--max-book-width",cssVariable:"--max-book-width"},{label:'Font family ("Segoe UI", roboto, verdana, sans-serif)',cssVariable:"--font-family"}];var _=a(5879),p=a(2969);let v=(()=>{class c{constructor(r){this.localStorageService=r,this.customStyles$=new C.X([]);const l=[];d.forEach(h=>{l.push({...h,value:this.localStorageService.getString(h.cssVariable)})}),this.customStyles$.next(l)}setStyle(r,l){this.localStorageService.setString(r,l);const h=this.customStyles$.value,u=h.find(P=>P.cssVariable===r);u&&(u.value=l,this.customStyles$.next([...h]))}resetAllStyles(){const r=[];d.forEach(l=>{r.push({...l,value:""}),this.localStorageService.setString(l.cssVariable,"")}),this.customStyles$.next(r)}}return c.\u0275fac=function(r){return new(r||c)(_.LFG(p.n))},c.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},3199:(x,g,a)=>{a.r(g),a.d(g,{FavoritePhrasesComponent:()=>b});var m,C=a(7582),d=a(6814),_=a(6223),p=a(9157),v=a(2032),c=a(2296),f=a(617),r=a(8180),l=a(8483),h=a(8299),u=a(1791),P=a(2058),t=a(5879),M=a(5152),T=a(5800);const O=["componentContent"];function E(i,n){if(1&i&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.updatedTimestamp,"dd.MM.yyyy")," ")}}function w(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",15)(2,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,y=t.oxw();return t.KtG(y.delete(s))}),t.TgZ(3,"mat-icon"),t._uU(4," delete "),t.qZA()(),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,y=t.oxw();return t.KtG(y.check(s))}),t.TgZ(6,"mat-icon"),t._uU(7," done "),t.qZA()(),t.YNc(8,E,3,4,"span",18),t.qZA(),t.TgZ(9,"div",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clickOnWord())}),t._uU(10),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit;t.xp6(5),t.Q6J("color",e.isChecked?"accent":"primary"),t.xp6(3),t.Q6J("ngIf",e.updatedTimestamp),t.xp6(2),t.hij(" ",e.text,"")}}function S(i,n){if(1&i&&(t.TgZ(0,"div",13),t.YNc(1,w,11,3,"ng-container",14),t.qZA()),2&i){const e=n.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isChecked||o.showAll)}}let b=((m=class{constructor(n,e,o,s){this.customStylesService=n,this.favoritePhrasesService=e,this.cdr=o,this.activatedRoute=s,this.phrasesInit=[],this.newPhraseText="",this.showAll=!1,this.currentTerm="",this.phrases=[]}ngOnInit(){this.phrases=[...this.phrasesInit];const n=this.activatedRoute.snapshot.queryParams.add;n&&(this.newPhraseText=n,this.cdr.detectChanges())}ngAfterViewInit(){this.subscribeToCustomStylesService()}clickOnWord(){this.currentTerm=(0,h.R)()}add(){if(!this.newPhraseText)return;const n={text:this.newPhraseText,updatedTimestamp:Date.now()};this.favoritePhrasesService.addPhrase$(n).pipe((0,r.q)(1)).subscribe(e=>{this.phrases.push(e),this.cdr.detectChanges()})}delete(n){const e=this.phrases[n]?.id;e?(this.phrases.splice(n,1),this.cdr.detectChanges(),this.favoritePhrasesService.delete(e)):console.error("favoritePhrase id is null")}check(n){this.phrases[n].isChecked=!this.phrases[n].isChecked,this.cdr.detectChanges(),this.favoritePhrasesService.update(this.phrases[n])}subscribeToCustomStylesService(){this.customStylesService.customStyles$.pipe((0,u.t)(this)).subscribe(n=>{n.forEach(e=>{this.componentContent.nativeElement.style.setProperty(e.cssVariable,e.value)}),this.cdr.detectChanges()})}}).\u0275fac=function(n){return new(n||m)(t.Y36(M.N),t.Y36(T.N),t.Y36(t.sBO),t.Y36(P.gz))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-favorite-phrases"]],viewQuery:function(n,e){if(1&n&&t.Gf(O,5),2&n){let o;t.iGM(o=t.CRH())&&(e.componentContent=o.first)}},inputs:{phrasesInit:"phrasesInit"},standalone:!0,features:[t.jDz],decls:18,vars:5,consts:[[1,"component-content"],["componentContent",""],[1,"main"],[1,"add-new"],[1,"text-area"],["matInput","",3,"ngModel","keyup","keydown","ngModelChange"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],[1,"phrases-list"],["class","phrases-item",4,"ngFor","ngForOf"],[1,"dictionary"],[3,"term"],[1,"phrases-item"],[4,"ngIf"],[1,"phrases-item-tools"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","",3,"color","click"],["class","update-time",4,"ngIf"],[1,"phrase-text",3,"click"],[1,"update-time"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6," New phrases"),t.qZA(),t.TgZ(7,"textarea",5),t.NdJ("keyup",function(s){return s.stopPropagation()})("keydown",function(s){return s.stopPropagation()})("ngModelChange",function(s){return e.newPhraseText=s}),t.qZA()(),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.add()}),t._uU(9," Add "),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return e.showAll=!e.showAll}),t._uU(11," Show all "),t.qZA(),t.TgZ(12,"button",8),t._uU(13," Home "),t.qZA()(),t.TgZ(14,"div",9),t.YNc(15,S,2,1,"div",10),t.qZA()(),t.TgZ(16,"div",11),t._UZ(17,"app-dictionary",12),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngModel",e.newPhraseText),t.xp6(1),t.Q6J("disabled",!e.newPhraseText),t.xp6(4),t.Q6J("routerLink","/"),t.xp6(3),t.Q6J("ngForOf",e.phrases),t.xp6(2),t.Q6J("term",e.currentTerm))},dependencies:[d.ez,d.sg,d.O5,d.uU,_.u5,_.Fj,_.JJ,_.On,p.lN,p.KE,p.hX,v.c,v.Nt,c.ot,c.lW,c.RK,f.Ps,f.Hw,l.Z,P.rH],styles:[".component-content[_ngcontent-%COMP%]{display:flex;gap:var(--padding-small);justify-content:end;padding:0;width:100vw;max-width:100vw;height:calc(100vh - 4px);max-height:calc(100vh - 4px);box-sizing:border-box;background:var(--background-color-main);background-image:var(--book-background-image);background-repeat:repeat;font-family:var(--font-family);color:var(--font-color-main)}.main[_ngcontent-%COMP%]{max-width:var(--max-book-width);width:var(--max-book-width);padding:var(--padding-main)}.main[_ngcontent-%COMP%]   .add-new[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-small)}.main[_ngcontent-%COMP%]   .add-new[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]   .phrases-list[_ngcontent-%COMP%]   .phrases-item[_ngcontent-%COMP%]   .phrases-item-tools[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-small)}.main[_ngcontent-%COMP%]   .phrases-list[_ngcontent-%COMP%]   .phrases-item[_ngcontent-%COMP%]   .phrase-text[_ngcontent-%COMP%]{font-size:var(--font-size-original-text)}.dictionary[_ngcontent-%COMP%]{overflow:auto;width:var(--dictionary-width)}@media (max-width: 1000px){.dictionary[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),m);b=(0,C.gn)([(0,u.c)()],b)}}]);