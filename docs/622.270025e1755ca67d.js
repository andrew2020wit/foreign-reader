"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[622],{9622:(R,u,c)=>{c.r(u),c.d(u,{HomeComponent:()=>E});var _=c(3650),F=c(2311),l=c(8834),g=c(4710),d=c(6697),p=c(5596),t=c(4438),h=c(7749),k=c(7118);let x=(()=>{class i{constructor(o,n){this.loader=o,this.exportImportService=n,this.update=new t.bkB}readJSONFile(o){const n=o?.target?.files[0];if(!n)return;const e=new FileReader;e.onload=r=>{const s=r?.target?.result;if(!s)return;const a=this.exportImportService.importJsonText(s);a&&(this.loader.start(),a.pipe((0,d.s)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},e.readAsText(n)}readTxtFile(o){const n=o?.target?.files[0];if(!n)return;const e=new FileReader;e.onload=r=>{const s=r?.target?.result;if(!s)return;const a=this.exportImportService.importTextFile(s,n.name);a&&(this.loader.start(),a.pipe((0,d.s)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},e.readAsText(n)}readSrtFile(o){const n=o?.target?.files[0];if(!n)return;const e=new FileReader;e.onload=r=>{const s=r?.target?.result;if(!s)return;let a="";(function v(i){const m=i.split("\n"),o=[];let n=1,e={index:""};for(let r=0;r<m.length;r++){const s=m[r];s?1!==n?2!==n?e.text=e.text?e.text+s:s:(e.time=s,n++):(e.index=s,n++):(n=0,e.index&&(o.push(e),e={}),n++)}return o})(s).forEach(b=>{a+=b.time?.slice(0,5)+" "+b.text+"\n"});const f=this.exportImportService.importTextFile(a,n.name);f&&(this.loader.start(),f.pipe((0,d.s)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},e.readAsText(n)}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(h.Z),t.rXU(k.p))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-import-book"]],outputs:{update:"update"},standalone:!0,features:[t.aNF],decls:16,vars:0,consts:[["jsonFileInput",""],["textFileInput",""],["srtFileInput",""],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],[1,"copyright"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["type","file","accept",".txt",1,"hidden-file-input",3,"change"],["type","file","accept",".srt",1,"hidden-file-input",3,"change"]],template:function(n,e){if(1&n){const r=t.RV6();t.j41(0,"mat-card")(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(r);const a=t.sdS(13);return t.Njj(a.click())}),t.EFF(3," Open a plain txt-file (UTF-8) "),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){t.eBV(r);const a=t.sdS(15);return t.Njj(a.click())}),t.EFF(5," Open a srt-file (subtitles, UTF-8) "),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){t.eBV(r);const a=t.sdS(11);return t.Njj(a.click())}),t.EFF(7," Import a book from json-file "),t.k0s()(),t.j41(8,"div",5),t.EFF(9," Copyright (c) 2023-2024 Andrii Faurash "),t.k0s()(),t.j41(10,"input",6,0),t.bIt("change",function(a){return t.eBV(r),t.Njj(e.readJSONFile(a))}),t.k0s(),t.j41(12,"input",7,1),t.bIt("change",function(a){return t.eBV(r),t.Njj(e.readTxtFile(a))}),t.k0s(),t.j41(14,"input",8,2),t.bIt("change",function(a){return t.eBV(r),t.Njj(e.readSrtFile(a))}),t.k0s()}},dependencies:[l.Hl,l.$z,p.Hu,p.RN],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"],changeDetection:0})}}return i})();var M=c(7915),P=c(9530);const j=i=>["/edit-book-header",i],T=i=>["/book",i];function y(i,m){if(1&i){const o=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"button",6),t.bIt("click",function(){const e=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj(r.delete(e.id))}),t.EFF(3,"Delete"),t.k0s(),t.j41(4,"button",7),t.bIt("click",function(){const e=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj(r.export(e))}),t.EFF(5,"Export"),t.k0s(),t.j41(6,"button",8),t.EFF(7,"Edit Title"),t.k0s()(),t.j41(8,"button",9),t.EFF(9),t.k0s()()}if(2&i){const o=m.$implicit;t.R7$(6),t.Y8G("routerLink",t.eq3(3,j,o.id)),t.R7$(2),t.Y8G("routerLink",t.eq3(5,T,o.id)),t.R7$(),t.SpI(" ",o.title," ")}}function I(i,m){if(1&i&&(t.j41(0,"mat-card",0)(1,"div",2)(2,"div",3),t.Z7z(3,y,10,7,"div",4,t.fX1),t.k0s()()()),2&i){const o=t.XpG();t.R7$(3),t.Dyx(o.booksTitles)}}let w=(()=>{class i{constructor(o,n,e,r,s){this.bookService=o,this.loader=n,this.infoService=e,this.cd=r,this.exportImportService=s,this.booksTitles=[]}ngOnInit(){this.loader.topOn(),this.cd.detectChanges(),this.setTitles()}setTitles(){this.loader.topOn(),this.bookService.getAllTitles$().pipe((0,d.s)(1)).subscribe({next:o=>{this.booksTitles=o,this.booksTitles.sort((n,e)=>(e.lastOpenedTime||0)-(n.lastOpenedTime||0)),this.cd.detectChanges(),this.loader.topOff()},error:o=>{this.loader.topOff(),console.error(o),this.cd.detectChanges()}})}delete(o){this.loader.topOn(),this.bookService.delete$(o).pipe((0,d.s)(1)).subscribe({next:()=>{this.infoService.show("Book is deleted"),this.setTitles(),this.loader.topOff()},error:n=>{this.infoService.error("Book is not deleted"),console.error(n),this.loader.topOff()}})}export(o){this.exportImportService.export(o.id)}update(){this.setTitles()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(M.l),t.rXU(h.Z),t.rXU(P.O),t.rXU(t.gRc),t.rXU(k.p))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-books"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[1,"books-block"],[3,"update"],[1,"list-wrapper"],[1,"list"],[1,"list-item"],[1,"buttons"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","primary",1,"title",3,"routerLink"]],template:function(n,e){1&n&&(t.DNE(0,I,5,0,"mat-card",0),t.j41(1,"app-import-book",1),t.bIt("update",function(){return e.update()}),t.k0s()),2&n&&t.vxM(0,null!=e.booksTitles&&e.booksTitles.length?0:-1)},dependencies:[p.Hu,p.RN,g.Wk,l.Hl,l.$z,x],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%], [_nghost-%COMP%]   .import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;gap:8px;width:-moz-fit-content;width:fit-content;margin:var(--padding-small)}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"]})}}return i})();var B=c(4823);let E=(()=>{class i{constructor(){this.appVersion="2.25.1",this.RoutesEnum=_.Q,this.appTitle=F.m}goToHomeSite(){window.open("https://github.com/andrew2020wit/foreign-reader","_blank")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-home"]],standalone:!0,features:[t.aNF],decls:20,vars:7,consts:[[1,"home-header"],["mat-button","","color","primary",3,"click"],[1,"app-title"],["mat-button","","color","primary",3,"routerLink"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"routerLink"],[1,"books"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return e.goToHomeSite()}),t.EFF(2," About "),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.j41(5,"span"),t.EFF(6),t.k0s()(),t.j41(7,"button",3),t.EFF(8," Settings "),t.k0s()(),t.j41(9,"mat-card")(10,"div",4)(11,"button",5),t.EFF(12," Dictionary Viewer "),t.k0s(),t.j41(13,"button",5),t.EFF(14," Favorite Words "),t.k0s(),t.j41(15,"button",5),t.EFF(16," Favorite Examples "),t.k0s(),t.j41(17,"button",5),t.EFF(18," Create an example "),t.k0s()()(),t.nrm(19,"app-books",6)),2&n&&(t.R7$(4),t.SpI(" ",e.appTitle," "),t.R7$(2),t.SpI(" (v ",e.appVersion,") "),t.R7$(),t.Y8G("routerLink","/"+e.RoutesEnum.Settings),t.R7$(4),t.Y8G("routerLink","/"+e.RoutesEnum.DictionaryViewer),t.R7$(2),t.Y8G("routerLink","/"+e.RoutesEnum.FavoriteWords),t.R7$(2),t.Y8G("routerLink","/"+e.RoutesEnum.FavoriteExamples),t.R7$(2),t.Y8G("routerLink","/"+e.RoutesEnum.CreateExample))},dependencies:[l.Hl,l.$z,g.Wk,w,p.Hu,p.RN,B.uc],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--padding-main)}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main);width:100%}"]})}}return i})()}}]);