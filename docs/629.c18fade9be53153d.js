"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[629],{5709:(x,C,i)=>{i.d(C,{j:()=>g});var c=i(5619),u=i(8180),T=i(2096),t=i(7772),y=i(5879),n=i(2e3),d=i(957);let g=(()=>{class v{constructor(s,h){this.dbService=s,this.infoService=h,this.examples$=new c.X([]),this.sort=(p,_)=>(p.toDoTimestamp||0)-(_.toDoTimestamp||0),this.dbService.getAll(t.L.FavoriteExamples).pipe((0,u.q)(1)).subscribe(p=>{p.forEach(_=>_.showDetails=!1),p?(p.sort(this.sort),this.examples$.next(p)):this.examples$.next([])})}deleteAll(){return this.dbService.clear(t.L.FavoriteExamples)}import(s){const h=JSON.parse(s)?.favoriteExamples;return h?.length?this.dbService.bulkAdd(t.L.FavoriteExamples,h).pipe((0,u.q)(1)):(console.error("!examples?.length"),this.infoService.error("!examples?.length"),(0,T.of)([]))}addExample(s){const h=Date.now(),p={...s,timestamp:h,showDetails:!1};this.dbService.add(t.L.FavoriteExamples,p).pipe((0,u.q)(1)).subscribe();const _=[p,...this.examples$.value];this.examples$.next(_),this.infoService.show("added: "+s.original)}update(s){if(!s?.timestamp||!s.toDoTimestamp)return;const h=this.examples$.value,p=h.find(_=>_.timestamp===s.timestamp);p&&(p.toDoTimestamp=s.toDoTimestamp,p.updateTimestamp=Date.now(),this.dbService.update(t.L.FavoriteExamples,p).pipe((0,u.q)(1)).subscribe(),h.sort(this.sort),this.examples$.next(h))}removeExample(s){if(!s)return;this.dbService.delete(t.L.FavoriteExamples,s).pipe((0,u.q)(1)).subscribe();const h=this.examples$.value.filter(p=>p.timestamp!==s);this.examples$.next(h)}}return v.\u0275fac=function(s){return new(s||v)(y.LFG(n.ys),y.LFG(d.C))},v.\u0275prov=y.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},3629:(x,C,i)=>{i.r(C),i.d(C,{SettingsComponent:()=>D});var c=i(6814),u=i(2296),T=i(4408),t=i(5879),y=i(5195),n=i(8180),d=i(1839),g=i(144);let v=(()=>{class l{constructor(e,o){this.loader=e,this.exportImportService=o,this.update=new t.vpe}readMorphologyReplaceRules(e){const o=e?.target?.files[0];if(!o)return;const a=new FileReader;a.onload=m=>{const r=m?.target?.result;if(!r)return;const f=this.exportImportService.importMorphologyReplaceRules(r);f&&(this.loader.start(),f.pipe((0,n.q)(1)).subscribe(()=>{this.loader.stop()}))},a.readAsText(o)}readMorphology(e){const o=e?.target?.files[0];if(!o)return;const a=new FileReader;a.onload=m=>{const r=m?.target?.result;if(!r)return;const f=this.exportImportService.importMorphology(r);f&&(this.loader.start(),f.pipe((0,n.q)(1)).subscribe(()=>{this.loader.stop()}))},a.readAsText(o)}readDictionary(e){const o=e?.target?.files[0];if(!o)return;const a=new FileReader;a.onload=m=>{const r=m?.target?.result;if(!r)return;const f=this.exportImportService.importDictionary(r);f&&(this.loader.start(),f.pipe((0,n.q)(1)).subscribe(()=>{this.loader.stop()}))},a.readAsText(o)}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(d.D),t.Y36(g.U))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-import-dictionary"]],outputs:{update:"update"},standalone:!0,features:[t.jDz],decls:18,vars:0,consts:[[1,"info"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["morphologyFileInput",""],["morphologyReplaceRulesFileInput",""],["dictionaryFileInput",""]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"div",0),t._uU(2," It can take a few minutes to import a large dictionary. You'll have to wait. "),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(13);return t.KtG(r.click())}),t._uU(5," Import (replace) morphology "),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(15);return t.KtG(r.click())}),t._uU(7," Import (replace) MorphologyReplaceRules "),t.qZA(),t.TgZ(8,"button",2),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(17);return t.KtG(r.click())}),t._uU(9," Import (replace) dictionary "),t.qZA()(),t.TgZ(10,"div",0),t._uU(11," You have to reload web-application to apply new morphology and/or new dictionary. "),t.qZA()(),t.TgZ(12,"input",3,4),t.NdJ("change",function(r){return o.readMorphology(r)}),t.qZA(),t.TgZ(14,"input",3,5),t.NdJ("change",function(r){return o.readMorphologyReplaceRules(r)}),t.qZA(),t.TgZ(16,"input",3,6),t.NdJ("change",function(r){return o.readDictionary(r)}),t.qZA()}},dependencies:[c.ez,u.ot,u.lW,y.QW,y.a8],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}.info[_ngcontent-%COMP%]{margin:auto;padding:var(--padding-small)}"],changeDetection:0}),l})();var b=i(8863),h=i(5709);let p=(()=>{class l{constructor(e,o){this.loader=e,this.favoriteExamplesService=o,this.update=new t.vpe,this.datePipe=new c.uU("en")}export(){const e=this.favoriteExamplesService.examples$.value;e?.length&&this.download(function s(l){return JSON.stringify(l,null,2)}({favoriteExamples:e}),"favorite-examples")}import(e){const o=e?.target?.files[0];if(!o)return;const a=new FileReader;a.onload=m=>{const r=m?.target?.result;if(!r)return;const f=this.favoriteExamplesService.import(r);f&&(this.loader.start(),f.pipe((0,n.q)(1)).subscribe(I=>{this.loader.stop()}))},a.readAsText(o)}deleteAll(){window.confirm("Delete all?")&&(this.loader.start(),this.favoriteExamplesService.deleteAll().pipe((0,n.q)(1)).subscribe(o=>{this.loader.stop()}))}download(e,o){const a=this.datePipe.transform(new Date,"yyyy-MM-dd");(0,b.l)(e,o+`.${a}.json`)}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(d.D),t.Y36(h.j))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-import-favorite-example"]],outputs:{update:"update"},standalone:!0,features:[t.jDz],decls:12,vars:0,consts:[[1,"info"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["importFileInput",""]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"div",0),t._uU(2," Favorite examples. You have to reload page after import. "),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return o.export()}),t._uU(5," Export Favorites "),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(11);return t.KtG(r.click())}),t._uU(7," Import (add) Favorites "),t.qZA(),t.TgZ(8,"button",2),t.NdJ("click",function(){return o.deleteAll()}),t._uU(9," Delete all Favorites "),t.qZA()()(),t.TgZ(10,"input",3,4),t.NdJ("change",function(r){return o.import(r)}),t.qZA()}},dependencies:[c.ez,u.ot,u.lW,y.QW,y.a8],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}.info[_ngcontent-%COMP%]{margin:auto;padding:var(--padding-small)}"],changeDetection:0}),l})();var _=i(5152),M=i(2969);let D=(()=>{class l{constructor(e,o){this.customStylesService=e,this.localStorageService=o,this.copyToClipboardState=this.localStorageService.copyToClipboard,this.showDictionaryState=this.localStorageService.showDictionary,this.showTranslationState=this.localStorageService.showTranslationInBook}copyToClipboard(e){this.localStorageService.copyToClipboard=e,this.copyToClipboardState=e}showDictionary(e){this.localStorageService.showDictionary=e,this.showDictionaryState=e}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(_.N),t.Y36(M.n))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-settings"]],standalone:!0,features:[t.jDz],decls:22,vars:2,consts:[[1,"component-content"],[1,"header"],["mat-button","","color","primary","routerLink","/"],[1,"title"],[1,"settings"],[1,"divider"],[1,"setting-item"],["mat-button","","color","primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._uU(3," Go Home. "),t.qZA(),t.TgZ(4,"div",3),t._uU(5,"Settings"),t.qZA()(),t.TgZ(6,"div",4),t._UZ(7,"div",5),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return o.customStylesService.resetAllStyles()}),t._uU(10," Reset all styles "),t.qZA()(),t._UZ(11,"div",5),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return o.copyToClipboard(!o.copyToClipboardState)}),t._uU(14),t.qZA()(),t._UZ(15,"div",5),t.TgZ(16,"div",6)(17,"button",7),t.NdJ("click",function(){return o.showDictionary(!o.showDictionaryState)}),t._uU(18),t.qZA()(),t._UZ(19,"div",5)(20,"app-import-dictionary")(21,"app-import-favorite-example"),t.qZA()()),2&e&&(t.xp6(14),t.hij(" Copy to clipboard: ",o.copyToClipboardState," "),t.xp6(4),t.hij(" Show dictionary: ",o.showDictionaryState," "))},dependencies:[c.ez,u.ot,u.lW,T.rH,v,p],styles:[".component-content[_ngcontent-%COMP%]{padding:var(--padding-main)}.component-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-main)}.component-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.component-content[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%;min-width:100%;border-top:1px dashed gray;margin:var(--padding-main) 0}.component-content[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{justify-content:center;display:flex}"]}),l})()},2969:(x,C,i)=>{i.d(C,{n:()=>T});var c=function(t){return t.CurrentPopupMenuTab="CurrentPopupMenuTab",t.CopyToClipboard="CopyToClipboard",t.ShowDictionary="ShowDictionary",t.HideMarkedHeaders="HideMarkedHeaders",t.ShowTranslationInBook="ShowTranslationInBook",t.AutoTranslateSelected="AutoTranslateSelected",t.ShowTranslatorInDictionaryViewer="ShowTranslatorInDictionaryViewer",t}(c||{}),u=i(5879);let T=(()=>{class t{get hideMarkedHeaders(){return this.getBoolean(c.HideMarkedHeaders,!1)}set hideMarkedHeaders(n){this.setBoolean(c.HideMarkedHeaders,n)}get copyToClipboard(){return this.getBoolean(c.CopyToClipboard,!1)}set copyToClipboard(n){this.setBoolean(c.CopyToClipboard,n)}get showDictionary(){return this.getBoolean(c.ShowDictionary,!0)}set showDictionary(n){this.setBoolean(c.ShowDictionary,n)}get showTranslationInBook(){return this.getBoolean(c.ShowTranslationInBook,!0)}set showTranslationInBook(n){this.setBoolean(c.ShowTranslationInBook,n)}get currentPopupMenuTab(){return this.getNumber(c.CurrentPopupMenuTab)}set currentPopupMenuTab(n){this.setNumber(c.CurrentPopupMenuTab,n||0)}constructor(){this.trueString="true",this.falseString="false"}getString(n,d=""){return localStorage.getItem(n)||d}setString(n,d){localStorage.setItem(n,d)}setNumber(n,d){localStorage.setItem(n,String(d||0))}getNumber(n,d=0){const g=localStorage.getItem(n);if(null===g)return d;const v=+g;return Number.isNaN(v)?d:v}setBoolean(n,d){localStorage.setItem(n,d?this.trueString:this.falseString)}getBoolean(n,d=!1){const g=localStorage.getItem(n);return g===this.trueString||g!==this.falseString&&d}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);