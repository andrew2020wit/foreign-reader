"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[157],{157:(J,g,a)=>{a.r(g),a.d(g,{HomeComponent:()=>B});var O=a(5933),T=a(9662),m=a(6814),p=a(2296),h=a(2058),u=a(8180),d=a(5195),t=a(5879),f=a(1839),_=a(144);let M=(()=>{class i{constructor(o,e){this.loader=o,this.exportImportService=e,this.update=new t.vpe}readJSONFile(o){const e=o?.target?.files[0];if(!e)return;const r=new FileReader;r.onload=s=>{const n=s?.target?.result;if(!n)return;const l=this.exportImportService.importJsonText(n);l&&(this.loader.start(),l.pipe((0,u.q)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},r.readAsText(e)}readTxtFile(o){const e=o?.target?.files[0];if(!e)return;const r=new FileReader;r.onload=s=>{const n=s?.target?.result;if(!n)return;const l=this.exportImportService.importTextFile(n,e.name);l&&(this.loader.start(),l.pipe((0,u.q)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},r.readAsText(e)}readSrtFile(o){const e=o?.target?.files[0];if(!e)return;const r=new FileReader;r.onload=s=>{const n=s?.target?.result;if(!n)return;let l="";(function v(i){const c=i.split("\n"),o=[];let e=1,r={index:""};for(let s=0;s<c.length;s++){const n=c[s];n?1!==e?2!==e?r.text=r.text?r.text+n:n:(r.time=n,e++):(r.index=n,e++):(e=0,r.index&&(o.push(r),r={}),e++)}return o})(n).forEach(b=>{l+=b.time?.slice(0,5)+" "+b.text+"\n"});const C=this.exportImportService.importTextFile(l,e.name);C&&(this.loader.start(),C.pipe((0,u.q)(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},r.readAsText(e)}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(f.D),t.Y36(_.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-import-book"]],outputs:{update:"update"},standalone:!0,features:[t.jDz],decls:16,vars:0,consts:[[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],[1,"copyright"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["jsonFileInput",""],["type","file","accept",".txt",1,"hidden-file-input",3,"change"],["textFileInput",""],["type","file","accept",".srt",1,"hidden-file-input",3,"change"],["srtFileInput",""]],template:function(o,e){if(1&o){const r=t.EpF();t.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(13);return t.KtG(n.click())}),t._uU(3," Open plain txt-file (UTF-8) "),t.qZA(),t.TgZ(4,"button",1),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(15);return t.KtG(n.click())}),t._uU(5," Open srt-file (subtitles, UTF-8) "),t.qZA(),t.TgZ(6,"button",1),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(11);return t.KtG(n.click())}),t._uU(7," Import book from json-file "),t.qZA()(),t.TgZ(8,"div",2),t._uU(9," Copyright (c) 2023-2024 Andrii Faurash "),t.qZA()(),t.TgZ(10,"input",3,4),t.NdJ("change",function(n){return e.readJSONFile(n)}),t.qZA(),t.TgZ(12,"input",5,6),t.NdJ("change",function(n){return e.readTxtFile(n)}),t.qZA(),t.TgZ(14,"input",7,8),t.NdJ("change",function(n){return e.readSrtFile(n)}),t.qZA()}},dependencies:[m.ez,p.ot,p.lW,d.QW,d.a8],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"],changeDetection:0}),i})();var P=a(5071),Z=a(957);const y=function(i){return["/edit-book-header",i]},A=function(i){return["/book",i]};function w(i,c){if(1&i){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"button",8),t.NdJ("click",function(){const s=t.CHM(o).$implicit,n=t.oxw(2);return t.KtG(n.delete(s.id))}),t._uU(3,"Delete"),t.qZA(),t.TgZ(4,"button",9),t.NdJ("click",function(){const s=t.CHM(o).$implicit,n=t.oxw(2);return t.KtG(n.export(s))}),t._uU(5,"Export"),t.qZA(),t.TgZ(6,"button",10),t._uU(7,"Edit Title"),t.qZA()(),t.TgZ(8,"button",11),t._uU(9),t.qZA()()}if(2&i){const o=c.$implicit;t.xp6(6),t.Q6J("routerLink",t.VKq(3,y,o.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(5,A,o.id)),t.xp6(1),t.hij(" ",o.title," ")}}function F(i,c){if(1&i&&(t.TgZ(0,"mat-card",2)(1,"div",3)(2,"div",4),t.YNc(3,w,10,7,"div",5),t.qZA()()()),2&i){const o=t.oxw();t.xp6(3),t.Q6J("ngForOf",o.booksTitles)}}let I=(()=>{class i{constructor(o,e,r,s,n){this.bookService=o,this.loader=e,this.infoService=r,this.cd=s,this.exportImportService=n,this.booksTitles=[]}ngOnInit(){this.loader.topOn(),this.cd.detectChanges(),this.setTitles()}setTitles(){this.loader.topOn(),this.bookService.getAllTitles$().pipe((0,u.q)(1)).subscribe({next:o=>{this.booksTitles=o,this.booksTitles.sort((e,r)=>(r.lastOpenedTime||0)-(e.lastOpenedTime||0)),this.cd.detectChanges(),this.loader.topOff()},error:o=>{this.loader.topOff(),console.error(o),this.cd.detectChanges()}})}delete(o){this.loader.topOn(),this.bookService.delete$(o).pipe((0,u.q)(1)).subscribe({next:()=>{this.infoService.show("Book deleted"),this.setTitles(),this.loader.topOff()},error:e=>{this.infoService.error("Book not deleted"),console.error(e),this.loader.topOff()}})}export(o){this.exportImportService.export(o.id)}update(){this.setTitles()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(P.Z),t.Y36(f.D),t.Y36(Z.C),t.Y36(t.sBO),t.Y36(_.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-books"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["class","books-block",4,"ngIf"],[3,"update"],[1,"books-block"],[1,"list-wrapper"],[1,"list"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"buttons"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","primary",1,"title",3,"routerLink"]],template:function(o,e){1&o&&(t.YNc(0,F,4,1,"mat-card",0),t.TgZ(1,"app-import-book",1),t.NdJ("update",function(){return e.update()}),t.qZA()),2&o&&t.Q6J("ngIf",null==e.booksTitles?null:e.booksTitles.length)},dependencies:[m.ez,m.sg,m.O5,d.QW,d.a8,h.rH,p.ot,p.lW,M],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%], [_nghost-%COMP%]   .import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;gap:8px;width:-moz-fit-content;width:fit-content;margin:var(--padding-small)}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"]}),i})();var S=a(2596);let B=(()=>{class i{constructor(){this.appVersion="2.21.0",this.RoutesEnum=O.X,this.appTitle=T.x}goToHomeSite(){window.open("https://github.com/andrew2020wit/foreign-reader","_blank")}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:20,vars:7,consts:[[1,"home-header"],["mat-button","","color","primary",3,"click"],[1,"app-title"],["mat-button","","color","primary",3,"routerLink"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"routerLink"],[1,"books"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return e.goToHomeSite()}),t._uU(2," About "),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"button",3),t._uU(8," Settings "),t.qZA()(),t.TgZ(9,"mat-card")(10,"div",4)(11,"button",5),t._uU(12," Dictionary Viewer "),t.qZA(),t.TgZ(13,"button",5),t._uU(14," Favorite Words "),t.qZA(),t.TgZ(15,"button",5),t._uU(16," Favorite Examples "),t.qZA(),t.TgZ(17,"button",5),t._uU(18," Create Example "),t.qZA()()(),t._UZ(19,"app-books",6)),2&o&&(t.xp6(4),t.hij(" ",e.appTitle," "),t.xp6(2),t.hij(" (v ",e.appVersion,") "),t.xp6(1),t.Q6J("routerLink","/"+e.RoutesEnum.Settings),t.xp6(4),t.Q6J("routerLink","/"+e.RoutesEnum.DictionaryViewer),t.xp6(2),t.Q6J("routerLink","/"+e.RoutesEnum.FavoriteWords),t.xp6(2),t.Q6J("routerLink","/"+e.RoutesEnum.FavoriteExamples),t.xp6(2),t.Q6J("routerLink","/"+e.RoutesEnum.CreateExample))},dependencies:[m.ez,p.ot,p.lW,h.rH,I,d.QW,d.a8,S.AV],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--padding-main)}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main);width:100%}"]}),i})()}}]);