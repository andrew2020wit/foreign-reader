import{a as x,b as D,c as J}from"./chunk-W6XQCXRA.js";import{a as G}from"./chunk-BJQOS3EI.js";import{a as Y}from"./chunk-34TAAYTI.js";import{a as z}from"./chunk-TJQH5JXW.js";import{c as N}from"./chunk-N4FDZVII.js";import"./chunk-EDACHHSA.js";import{a as T}from"./chunk-DELQYH7M.js";import{b as P,f as U,k as R,l as V,p as A,q as W,s as j,v as K,w as L,x as B,y as H}from"./chunk-PZ7MFQJW.js";import{D as y,Sb as F,Va as i,Wa as n,Xa as S,Za as E,_ as v,ab as c,ec as O,fa as p,ga as d,lb as f,ma as w,mb as l,ob as I,rb as h,rd as b,sb as _,tb as C,td as M,va as u,vb as k,wa as g}from"./chunk-OUFBJRPP.js";var X=(()=>{class m{constructor(r,o){this.loader=r,this.exportImportService=o,this.update=new w}readMorphologyReplaceRules(r){let o=r?.target?.files[0];if(!o)return;let e=new FileReader;e.onload=a=>{let t=a?.target?.result;if(!t)return;let s=this.exportImportService.importMorphologyReplaceRules(t);s&&(this.loader.start(),s.pipe(y(1)).subscribe(()=>{this.loader.stop()}))},e.readAsText(o)}readMorphology(r){let o=r?.target?.files[0];if(!o)return;let e=new FileReader;e.onload=a=>{let t=a?.target?.result;if(!t)return;let s=this.exportImportService.importMorphology(t);s&&(this.loader.start(),s.pipe(y(1)).subscribe(()=>{this.loader.stop()}))},e.readAsText(o)}readDictionary(r){let o=r?.target?.files[0];if(!o)return;let e=new FileReader;e.onload=a=>{let t=a?.target?.result;if(!t)return;let s=this.exportImportService.importDictionary(t);s&&(this.loader.start(),s.pipe(y(1)).subscribe(()=>{this.loader.stop()}))},e.readAsText(o)}static{this.\u0275fac=function(o){return new(o||m)(g(T),g(J))}}static{this.\u0275cmp=v({type:m,selectors:[["app-import-dictionary"]],outputs:{update:"update"},standalone:!0,features:[k],decls:18,vars:0,consts:[["morphologyFileInput",""],["morphologyReplaceRulesFileInput",""],["dictionaryFileInput",""],[1,"info"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],["type","file","accept",".json",1,"hidden-file-input",3,"change"]],template:function(o,e){if(o&1){let a=E();i(0,"mat-card")(1,"div",3),l(2," It can take a few minutes to import a large dictionary. You'll have to wait. "),n(),i(3,"div",4)(4,"button",5),c("click",function(){p(a);let s=f(13);return d(s.click())}),l(5," Import (replace) morphology "),n(),i(6,"button",5),c("click",function(){p(a);let s=f(15);return d(s.click())}),l(7," Import (replace) MorphologyReplaceRules "),n(),i(8,"button",5),c("click",function(){p(a);let s=f(17);return d(s.click())}),l(9," Import (replace) dictionary "),n()(),i(10,"div",3),l(11," You have to reload to apply the morphology and/or the dictionary. "),n()(),i(12,"input",6,0),c("change",function(s){return p(a),d(e.readMorphology(s))}),n(),i(14,"input",6,1),c("change",function(s){return p(a),d(e.readMorphologyReplaceRules(s))}),n(),i(16,"input",6,2),c("change",function(s){return p(a),d(e.readDictionary(s))}),n()}},dependencies:[M,b,D,x],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}.info[_ngcontent-%COMP%]{margin:auto;padding:var(--padding-small)}"],changeDetection:0})}}return m})();function Z(m){return JSON.stringify(m,null,2)}var $=(()=>{class m{constructor(r,o){this.loader=r,this.favoriteExamplesService=o,this.update=new w,this.datePipe=new F("en")}export(){let r=this.favoriteExamplesService.examples$.value;if(!r?.length)return;let o={favoriteExamples:r};this.download(Z(o),"favorite-examples")}import(r){let o=r?.target?.files[0];if(!o)return;let e=new FileReader;e.onload=a=>{let t=a?.target?.result;if(!t)return;let s=this.favoriteExamplesService.import(t);s&&(this.loader.start(),s.pipe(y(1)).subscribe(ie=>{this.loader.stop()}))},e.readAsText(o)}deleteAll(){window.confirm("Delete all?")&&(this.loader.start(),this.favoriteExamplesService.deleteAll().pipe(y(1)).subscribe(o=>{this.loader.stop()}))}download(r,o){let e=this.datePipe.transform(new Date,"yyyy-MM-dd");G(r,o+`.${e}.json`)}static{this.\u0275fac=function(o){return new(o||m)(g(T),g(z))}}static{this.\u0275cmp=v({type:m,selectors:[["app-import-favorite-example"]],outputs:{update:"update"},standalone:!0,features:[k],decls:12,vars:0,consts:[["importFileInput",""],[1,"info"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],["type","file","accept",".json",1,"hidden-file-input",3,"change"]],template:function(o,e){if(o&1){let a=E();i(0,"mat-card")(1,"div",1),l(2," Favorite examples. You have to reload the page after import. "),n(),i(3,"div",2)(4,"button",3),c("click",function(){return p(a),d(e.export())}),l(5," Export Favorites "),n(),i(6,"button",3),c("click",function(){p(a);let s=f(11);return d(s.click())}),l(7," Import (add) Favorites "),n(),i(8,"button",3),c("click",function(){return p(a),d(e.deleteAll())}),l(9," Delete all Favorites "),n()()(),i(10,"input",4,0),c("change",function(s){return p(a),d(e.import(s))}),n()}},dependencies:[M,b,D,x],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}.info[_ngcontent-%COMP%]{margin:auto;padding:var(--padding-small)}"],changeDetection:0})}}return m})();var Ae=(()=>{class m{constructor(r,o){this.customStylesService=r,this.localStorageService=o,this.copyToClipboardState=this.localStorageService.copyToClipboard,this.useExternalId=this.localStorageService.useExternalId,this.showDictionaryState=this.localStorageService.showDictionary,this.showTranslationState=this.localStorageService.showTranslationInBook,this.ankiHost=this.localStorageService.ankiHost,this.ankiDeck=this.localStorageService.ankiDeck,this.syncServerIsOn=this.localStorageService.syncServerIsOn,this.syncServerUrl=this.localStorageService.syncServerUrl,this.syncUserKey=this.localStorageService.syncUserKey,this.syncServerInterval=this.localStorageService.syncServerInterval}copyToClipboard(r){this.localStorageService.copyToClipboard=r,this.copyToClipboardState=r}toUseExternalId(r){this.localStorageService.useExternalId=r,this.useExternalId=r}showDictionary(r){this.localStorageService.showDictionary=r,this.showDictionaryState=r}setAnkiHost(){this.localStorageService.ankiHost=this.ankiHost}setAnkiDeck(){this.localStorageService.ankiDeck=this.ankiDeck}setSyncServerUrl(){this.syncServerUrl=this.syncServerUrl.trim(),this.localStorageService.syncServerUrl=this.syncServerUrl}setSyncUserKey(){this.syncUserKey=this.syncUserKey.trim(),this.localStorageService.syncUserKey=this.syncUserKey}setSyncServerInterval(){let r=+this.syncServerInterval;r<5&&(r=5,this.syncServerInterval=r),this.localStorageService.syncServerInterval=r}switchSyncIsOn(){this.syncServerIsOn=!this.syncServerIsOn,this.localStorageService.syncServerIsOn=this.syncServerIsOn}static{this.\u0275fac=function(o){return new(o||m)(g(Y),g(N))}}static{this.\u0275cmp=v({type:m,selectors:[["app-settings"]],standalone:!0,features:[k],decls:69,vars:9,consts:[[1,"component-content"],[1,"header"],["mat-button","","color","primary","routerLink","/"],[1,"title"],[1,"settings"],[1,"divider"],[1,"setting-item"],["mat-button","","color","primary",3,"click"],[1,"text-area"],["matInput","",3,"ngModelChange","ngModel"],[1,"attention"],["matInput","","type","number",3,"ngModelChange","ngModel"]],template:function(o,e){o&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),l(3," Go Home. "),n(),i(4,"div",3),l(5,"Settings"),n()(),i(6,"div",4),S(7,"div",5),i(8,"div",6)(9,"button",7),c("click",function(){return e.customStylesService.resetAllStyles()}),l(10," Reset all styles "),n()(),S(11,"div",5),i(12,"div",6)(13,"button",7),c("click",function(){return e.copyToClipboard(!e.copyToClipboardState)}),l(14),n()(),S(15,"div",5),i(16,"div",6)(17,"mat-form-field",8)(18,"mat-label"),l(19," ankiHost"),n(),i(20,"input",9),C("ngModelChange",function(t){return _(e.ankiHost,t)||(e.ankiHost=t),t}),n()(),i(21,"button",7),c("click",function(){return e.setAnkiHost()}),l(22," setAnkiHost "),n()(),i(23,"div",6)(24,"mat-form-field",8)(25,"mat-label"),l(26," ankiDeck"),n(),i(27,"input",9),C("ngModelChange",function(t){return _(e.ankiDeck,t)||(e.ankiDeck=t),t}),n()(),i(28,"button",7),c("click",function(){return e.setAnkiDeck()}),l(29," setAnkiDeck "),n()(),S(30,"div",5),i(31,"div",6)(32,"button",7),c("click",function(){return e.toUseExternalId(!e.useExternalId)}),l(33),n()(),S(34,"div",5),i(35,"div",6)(36,"button",7),c("click",function(){return e.showDictionary(!e.showDictionaryState)}),l(37),n()(),S(38,"div",5)(39,"app-import-dictionary")(40,"app-import-favorite-example")(41,"div",5),i(42,"div",10),l(43," You have to reload the application to apply sync changes. "),n(),i(44,"div",6)(45,"mat-form-field",8)(46,"mat-label"),l(47," Synchronization Server Url"),n(),i(48,"input",9),C("ngModelChange",function(t){return _(e.syncServerUrl,t)||(e.syncServerUrl=t),t}),n()(),i(49,"button",7),c("click",function(){return e.setSyncServerUrl()}),l(50," set SyncServerUrl "),n()(),i(51,"div",6)(52,"mat-form-field",8)(53,"mat-label"),l(54," Synchronization User Key"),n(),i(55,"input",9),C("ngModelChange",function(t){return _(e.syncUserKey,t)||(e.syncUserKey=t),t}),n()(),i(56,"button",7),c("click",function(){return e.setSyncUserKey()}),l(57," set User Key "),n()(),i(58,"div",6)(59,"mat-form-field",8)(60,"mat-label"),l(61," SyncServerInterval, min 5 sec"),n(),i(62,"input",11),C("ngModelChange",function(t){return _(e.syncServerInterval,t)||(e.syncServerInterval=t),t}),n()(),i(63,"button",7),c("click",function(){return e.setSyncServerInterval()}),l(64," set SyncServerInterval "),n()(),i(65,"div",6)(66,"button",7),c("click",function(){return e.switchSyncIsOn()}),l(67),n()(),S(68,"div",5),n()()),o&2&&(u(14),I(" Copy to clipboard: ",e.copyToClipboardState," "),u(6),h("ngModel",e.ankiHost),u(7),h("ngModel",e.ankiDeck),u(6),I(" Use ExternalId: ",e.useExternalId," "),u(4),I(" Show the dictionary: ",e.showDictionaryState," "),u(11),h("ngModel",e.syncServerUrl),u(7),h("ngModel",e.syncUserKey),u(7),h("ngModel",e.syncServerInterval),u(5),I(" Sync is on: ",e.syncServerIsOn," "))},dependencies:[M,b,O,X,$,L,K,j,H,B,W,P,V,U,A,R],styles:[".component-content[_ngcontent-%COMP%]{padding:var(--padding-main)}.component-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-main)}.component-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.component-content[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%;min-width:100%;border-top:1px dashed gray;margin:var(--padding-main) 0}.component-content[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{justify-content:center;display:flex;gap:8px;align-items:center}.attention[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin:var(--padding-main) 0}"]})}}return m})();export{Ae as SettingsComponent};
