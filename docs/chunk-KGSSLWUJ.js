import{a as H}from"./chunk-4FZLUD7I.js";import{a as x,b as O,c as T}from"./chunk-P3NXWZ2Y.js";import{b as J}from"./chunk-IC7VDW6G.js";import{a as A,c as U}from"./chunk-DEM7T3V2.js";import"./chunk-XUEBLCWM.js";import{a as S}from"./chunk-ARY73TYY.js";import{$ as f,Ba as C,Bb as E,C as h,Oa as V,Ob as $,Pa as B,Ra as j,Sa as D,Ta as L,Ua as k,Va as r,Wa as a,Xa as R,aa as _,ab as P,cb as m,db as w,ed as b,fd as M,jc as y,nb as I,pc as z,ra as d,rb as s,sa as F,tb as v,ya as u}from"./chunk-T5QFYCNY.js";var N="3.0.3";var q="https://github.com/andrew2020wit/foreign-reader";var W=(()=>{let n=class n{constructor(i,t){this.loader=i,this.exportImportService=t,this.update=new F}readJSONFile(i){let t=i?.target?.files[0];if(!t)return;let e=new FileReader;e.onload=p=>{let l=p?.target?.result;if(!l)return;let c=this.exportImportService.importJsonText(l);c&&(this.loader.start(),c.pipe(h(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},e.readAsText(t)}readTxtFile(i){let t=i?.target?.files[0];if(!t)return;let e=new FileReader;e.onload=p=>{let l=p?.target?.result;if(!l)return;let c=this.exportImportService.importTextFile(l,t.name);c&&(this.loader.start(),c.pipe(h(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},e.readAsText(t)}};n.\u0275fac=function(t){return new(t||n)(u(S),u(T))},n.\u0275cmp=C({type:n,selectors:[["app-import-book"]],outputs:{update:"update"},decls:12,vars:0,consts:[["jsonFileInput",""],["textFileInput",""],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],[1,"copyright"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["type","file","accept",".txt",1,"hidden-file-input",3,"change"]],template:function(t,e){if(t&1){let p=P();r(0,"mat-card")(1,"div",2)(2,"button",3),m("click",function(){f(p);let c=I(11);return _(c.click())}),s(3," Open a plain txt-file (UTF-8) "),a(),r(4,"button",3),m("click",function(){f(p);let c=I(9);return _(c.click())}),s(5," Import a book from json-file "),a()(),r(6,"div",4),s(7," Copyright (c) 2023-2026 Andrii Faurash "),a()(),r(8,"input",5,0),m("change",function(c){return f(p),_(e.readJSONFile(c))}),a(),r(10,"input",6,1),m("change",function(c){return f(p),_(e.readTxtFile(c))}),a()}},dependencies:[M,b,O,x],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"],changeDetection:0});let o=n;return o})();var tt=o=>["/edit-book-header",o],et=o=>["/book",o];function it(o,n){if(o&1){let g=P();r(0,"div",4)(1,"div",5)(2,"button",6),m("click",function(){let t=f(g).$implicit,e=w(2);return _(e.delete(t))}),s(3,"Delete"),a(),r(4,"button",7),m("click",function(){let t=f(g).$implicit,e=w(2);return _(e.export(t.id))}),s(5,"Export"),a(),r(6,"button",8),s(7,"Edit Title"),a()(),r(8,"button",9),s(9),a()()}if(o&2){let g=n.$implicit;d(6),k("routerLink",E(3,tt,g.id)),d(2),k("routerLink",E(5,et,g.id)),d(),v(" ",g.title," ")}}function nt(o,n){if(o&1&&(r(0,"mat-card",0)(1,"div",2)(2,"div",3),D(3,it,10,7,"div",4,j),a()()()),o&2){let g=w();d(3),L(g.booksTitles)}}var X=(()=>{let n=class n{constructor(i,t,e,p,l){this.bookService=i,this.loader=t,this.infoService=e,this.cd=p,this.exportImportService=l,this.booksTitles=[]}ngOnInit(){this.loader.topOn(),this.cd.detectChanges(),this.setTitles()}setTitles(){this.loader.topOn(),this.bookService.getAllTitles$().pipe(h(1)).subscribe({next:i=>{this.booksTitles=i,this.booksTitles.sort((t,e)=>(e.lastOpenedTime||0)-(t.lastOpenedTime||0)),this.cd.detectChanges(),this.loader.topOff()},error:i=>{this.loader.topOff(),console.error(i),this.cd.detectChanges()}})}delete(i){confirm(`Delete book ${i.title}?`)&&(this.export(i.id),this.loader.topOn(),this.bookService.delete$(i.id).pipe(h(1)).subscribe({next:()=>{this.infoService.show("Book is deleted"),this.setTitles(),this.loader.topOff()},error:e=>{this.infoService.error("Book is not deleted"),console.error(e),this.loader.topOff()}}))}export(i){this.exportImportService.export(i)}update(){this.setTitles()}};n.\u0275fac=function(t){return new(t||n)(u(z),u(S),u(U),u($),u(T))},n.\u0275cmp=C({type:n,selectors:[["app-books"]],decls:2,vars:1,consts:[[1,"books-block"],[3,"update"],[1,"list-wrapper"],[1,"list"],[1,"list-item"],[1,"buttons"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","primary",1,"title",3,"routerLink"]],template:function(t,e){t&1&&(V(0,nt,5,0,"mat-card",0),r(1,"app-import-book",1),m("update",function(){return e.update()}),a()),t&2&&B(e.booksTitles!=null&&e.booksTitles.length?0:-1)},dependencies:[O,x,y,M,b,W],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%], [_nghost-%COMP%]   .import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:fit-content}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;gap:8px;width:fit-content;margin:var(--padding-small)}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"]});let o=n;return o})();var Et=(()=>{let n=class n{constructor(){this.appVersion=N,this.RoutesEnum=H,this.appTitle=A}goToHomeSite(){window.open(q,"_blank")}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=C({type:n,selectors:[["app-home"]],decls:14,vars:4,consts:[[1,"home-header"],["mat-button","","color","primary",3,"click"],[1,"app-title"],["mat-button","","color","primary",3,"routerLink"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"routerLink"],[1,"books"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"button",1),m("click",function(){return e.goToHomeSite()}),s(2," About "),a(),r(3,"div",2),s(4),r(5,"span"),s(6),a()(),r(7,"button",3),s(8," Settings "),a()(),r(9,"mat-card")(10,"div",4)(11,"button",5),s(12," Dictionary Viewer "),a()()(),R(13,"app-books",6)),t&2&&(d(4),v(" ",e.appTitle," "),d(2),v(" (v ",e.appVersion,") "),d(),k("routerLink","/"+e.RoutesEnum.Settings),d(4),k("routerLink","/"+e.RoutesEnum.DictionaryViewer))},dependencies:[M,b,y,X,O,x,J],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--padding-main);max-width:100wv}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:100%}@media (max-width: 600px){.home-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:3;grid-row-start:2;grid-row-end:2;display:flex;justify-content:center}}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main);width:100%}"]});let o=n;return o})();export{Et as HomeComponent};
