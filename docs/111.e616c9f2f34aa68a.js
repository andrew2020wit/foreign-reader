"use strict";(self.webpackChunkforeign_reader=self.webpackChunkforeign_reader||[]).push([[111],{111:(w,b,s)=>{s.d(b,{V:()=>B});var A,o=s(7582),t=s(5879),x=s(6814),v=s(1791),E=s(2296),T=s(617),g=s(6223),O=s(4630),d=s(9157),u=s(2032),_=s(3680),h=s(8299),l=s(4861),f=s(3631),P=s(5591);const U=["topMarker"];function K(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"mat-option",15),t.NdJ("keyup.enter",function(){const D=t.CHM(i).$implicit,W=t.oxw();return t.KtG(W.selectTermOption(D))})("click",function(){const D=t.CHM(i).$implicit,W=t.oxw();return t.KtG(W.selectTermOption(D))}),t._uU(1),t.qZA()}if(2&r){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function Z(r,a){1&r&&(t.TgZ(0,"div",16),t._uU(1," dictionaryIsEmpty\n"),t.qZA())}function Y(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",19),t.NdJ("click",function(){const D=t.CHM(i).$implicit,W=t.oxw(2);return t.KtG(W.selectPartOfSpeech(D))}),t._uU(1),t.qZA()}if(2&r){const i=a.$implicit,m=t.oxw(2);t.ekj("selected",m.selectedPartsOfSpeech.includes(i)),t.xp6(1),t.hij(" ",i," ")}}function R(r,a){if(1&r&&(t.TgZ(0,"div",17),t.YNc(1,Y,2,3,"div",18),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.partsOfSpeech)}}function L(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(i);const y=t.oxw();return t.KtG(y.favoriteWordsService.switchCurrent())}),t.TgZ(1,"mat-icon"),t._uU(2,"star"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("color",null!=i.favoriteWordStatus&&i.favoriteWordStatus.status?"accent":"primary")}}function F(r,a){1&r&&(t.ynx(0),t._uU(1," => "),t.BQk())}function N(r,a){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,F,2,0,"ng-container",12),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.hij(" ",i.searchTerm," "),t.xp6(1),t.Q6J("ngIf",null==i.dictionaryTerm?null:i.dictionaryTerm.term)}}function j(r,a){if(1&r&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&r){const i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.transcription," ")}}function $(r,a){if(1&r&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&r){const i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.dictionaryName," ")}}function H(r,a){if(1&r&&(t.TgZ(0,"div",40),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.lexicalUnit," ")}}function J(r,a){if(1&r&&(t.TgZ(0,"span",41),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.level)}}function V(r,a){1&r&&(t.TgZ(0,"span",42),t._UZ(1,"div",43),t.qZA())}function Q(r,a){1&r&&(t.TgZ(0,"span",44),t._UZ(1,"div",43),t.qZA())}function G(r,a){if(1&r&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" Synonym: ",i.synonym," ")}}function z(r,a){if(1&r&&(t.TgZ(0,"div",46),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij(" Antonym: ",i.antonym," ")}}function X(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",50)(1,"div",51),t.NdJ("dblclick",function(){t.CHM(i);const y=t.oxw(5);return t.KtG(y.clickOnWord())}),t.TgZ(2,"button",52),t.NdJ("click",function(y){const W=t.CHM(i).$implicit,nt=t.oxw(2).$implicit,p=t.oxw(2).$implicit;return t.oxw().addExample(W,nt,p),t.KtG(y.stopPropagation())}),t._UZ(3,"mat-icon",53),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",54),t._uU(7),t.qZA()()}if(2&r){const i=a.$implicit;t.xp6(5),t.hij(" ",i.original," "),t.xp6(2),t.Oqu(i.translation)}}function q(r,a){if(1&r&&(t.TgZ(0,"div",47)(1,"div",48),t.YNc(2,X,8,2,"div",49),t.qZA()()),2&r){const i=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",i.examples)}}function k(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",29),t.YNc(1,H,2,1,"div",30),t.TgZ(2,"div",31),t.NdJ("click",function(){const D=t.CHM(i).$implicit;return t.KtG(D.showDetails=!D.showDetails)}),t.TgZ(3,"span",32),t.NdJ("dblclick",function(){t.CHM(i);const y=t.oxw(3);return t.KtG(y.clickOnWord())}),t.YNc(4,J,2,1,"span",33),t.YNc(5,V,2,0,"span",34),t.YNc(6,Q,2,0,"span",35),t.TgZ(7,"span",36),t._uU(8),t.qZA()()(),t.YNc(9,G,2,1,"div",37),t.YNc(10,z,2,1,"div",38),t.YNc(11,q,3,1,"div",39),t.qZA()}if(2&r){const i=a.$implicit;t.xp6(1),t.Q6J("ngIf",i.lexicalUnit),t.xp6(1),t.ekj("has-examples",i.examples),t.xp6(2),t.Q6J("ngIf",i.level),t.xp6(1),t.Q6J("ngIf",i.examples),t.xp6(1),t.Q6J("ngIf",!i.examples),t.xp6(2),t.hij(" ",i.definition," "),t.xp6(1),t.Q6J("ngIf",i.synonym),t.xp6(1),t.Q6J("ngIf",i.antonym),t.xp6(1),t.Q6J("ngIf",i.showDetails)}}function tt(r,a){if(1&r){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",22),t.YNc(2,j,2,1,"span",23),t.TgZ(3,"span",19),t.NdJ("click",function(){t.CHM(i);const y=t.oxw().$implicit,D=t.oxw();return t.KtG(D.selectPartOfSpeech(y.partOfSpeech))}),t._uU(4),t.qZA(),t.YNc(5,$,2,1,"span",24),t.qZA(),t.TgZ(6,"div",25),t.YNc(7,k,12,10,"div",26),t.qZA(),t.BQk()}if(2&r){const i=t.oxw().$implicit,m=t.oxw();t.xp6(2),t.Q6J("ngIf",i.transcription),t.xp6(1),t.ekj("selected",m.selectedPartsOfSpeech.includes(i.partOfSpeech)),t.xp6(1),t.hij(" ",i.partOfSpeech," "),t.xp6(1),t.Q6J("ngIf",i.dictionaryName),t.xp6(2),t.Q6J("ngForOf",i.definitions)}}function et(r,a){if(1&r&&(t.TgZ(0,"div",21),t.YNc(1,tt,8,6,"ng-container",12),t.qZA()),2&r){const i=a.$implicit,m=t.oxw();t.xp6(1),t.Q6J("ngIf",!m.selectedPartsOfSpeech.length||m.selectedPartsOfSpeech.includes(i.partOfSpeech))}}function it(r,a){if(1&r){const i=t.EpF();t.TgZ(0,"div",58),t.NdJ("dblclick",function(){t.CHM(i);const y=t.oxw(2);return t.KtG(y.clickOnWord())}),t._uU(1),t.qZA()}if(2&r){const i=a.$implicit;t.xp6(1),t.hij(" ",i," ")}}function st(r,a){if(1&r&&(t.TgZ(0,"div",55)(1,"div",56),t._uU(2,"See also:"),t.qZA(),t.YNc(3,it,2,1,"div",57),t.qZA()),2&r){const i=t.oxw();t.xp6(3),t.Q6J("ngForOf",i.words)}}let B=((A=class{set term(a){this.dictionaryService.setTerm(a),this.searchControl.setValue(a,{emitEvent:!1})}constructor(a,i,m,y){this.cdr=a,this.dictionaryService=i,this.favoriteExamplesService=m,this.favoriteWordsService=y,this.newTermIsSet=new t.vpe,this.searchTerm="",this.dictionaryIsEmpty=!1,this.dictionaryTerm=null,this.partsOfSpeech=[],this.selectedPartsOfSpeech=[],this.words=[],this.termOptions=[],this.searchControl=new g.NI(""),this.favoriteWordStatus=null}selectPartOfSpeech(a){this.selectedPartsOfSpeech.includes(a)?this.selectedPartsOfSpeech=this.selectedPartsOfSpeech.filter(i=>i!==a):this.selectedPartsOfSpeech.push(a)}ngOnInit(){this.favoriteWordsService.check$.pipe((0,v.t)(this)).subscribe(a=>{this.favoriteWordStatus=a,this.cdr.detectChanges()}),this.dictionaryService.currentDictionaryState$.pipe((0,v.t)(this)).subscribe(a=>{this.searchTerm=a?.searchTerm||"",this.dictionaryTerm=a?.currentDictionaryTerm||null,this.dictionaryIsEmpty=!!a?.dictionaryIsEmpty,this.words=a?.seeAlsoWords||[],this.dictionaryTerm?.term&&(this.words=this.words.filter(i=>i!==this.dictionaryTerm?.term)),this.setTerm(this.dictionaryTerm)}),this.initSearchControl()}initSearchControl(){this.searchControl.valueChanges.subscribe(a=>{!a||a.length<this.dictionaryService.minimalSearchPattern?this.termOptions=[]:(this.termOptions=this.dictionaryService.searchTerms(a)||[],1===this.termOptions.length&&this.selectTermOption(this.termOptions[0]))})}paste(){navigator.clipboard.readText().then(a=>this.selectTermOption(a?.trim()||""),a=>console.error(a))}selectTermOption(a){this.dictionaryService.setTerm(a||""),this.termOptions=[],this.newTermIsSet.emit(a||"")}clickOnWord(){const a=(0,h.R)();this.searchControl.setValue(a,{emitEvent:!1}),this.dictionaryService.setTerm(a),this.newTermIsSet.emit(a)}addExample(a,i,m){this.favoriteExamplesService.addExample({definition:i.definition,original:a.original,translation:a.translation||"",synonym:i.synonym||"",antonym:i.antonym||"",level:i.level||"",partOfSpeech:m.partOfSpeech,term:this.dictionaryTerm?.term||"",transcription:m.transcription||""})}setTerm(a){if(this.selectedPartsOfSpeech=[],this.dictionaryTerm=a,!a)return this.partsOfSpeech=[],void this.cdr.detectChanges();const i=a.articles.map(m=>m.partOfSpeech?.toLowerCase()?.trim()||"").filter(m=>!!m);this.partsOfSpeech=[...new Set(i)],this.topMarker?.nativeElement?.scrollIntoView(),this.cdr.detectChanges()}}).\u0275fac=function(a){return new(a||A)(t.Y36(t.sBO),t.Y36(l.E),t.Y36(f.j),t.Y36(P.d))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-dictionary-widget"]],viewQuery:function(a,i){if(1&a&&t.Gf(U,5),2&a){let m;t.iGM(m=t.CRH())&&(i.topMarker=m.first)}},inputs:{term:"term"},outputs:{newTermIsSet:"newTermIsSet"},standalone:!0,features:[t.jDz],decls:19,vars:10,consts:[[1,"top-marker"],["topMarker",""],[1,"search-bar"],[1,"form-field"],[1,"mat-label"],["type","text","placeholder","Term","autocomplete","false","matInput","",3,"formControl","matAutocomplete","keyup.enter","keyup","keydown","paste"],["auto","matAutocomplete"],[3,"value","keyup.enter","click",4,"ngFor","ngForOf"],["class","empty-dictionary",4,"ngIf"],["class","parts-of-speech",4,"ngIf"],[1,"header"],["class","favorite-word-button","mat-icon-button","",3,"color","click",4,"ngIf"],[4,"ngIf"],["class","article",4,"ngFor","ngForOf"],["class","words",4,"ngIf"],[3,"value","keyup.enter","click"],[1,"empty-dictionary"],[1,"parts-of-speech"],["class","part-of-speech",3,"selected","click",4,"ngFor","ngForOf"],[1,"part-of-speech",3,"click"],["mat-icon-button","",1,"favorite-word-button",3,"color","click"],[1,"article"],[1,"article-header"],["class","transcription",4,"ngIf"],["class","dictionary",4,"ngIf"],[1,"definitions"],["class","definition",4,"ngFor","ngForOf"],[1,"transcription"],[1,"dictionary"],[1,"definition"],["class","lex-unit",4,"ngIf"],[1,"definition",3,"click"],[3,"dblclick"],["class","level",4,"ngIf"],["class","content-mark",4,"ngIf"],["class","non-content-mark",4,"ngIf"],[1,"def-text"],["class","synonym",4,"ngIf"],["class","antonym",4,"ngIf"],["class","details",4,"ngIf"],[1,"lex-unit"],[1,"level"],[1,"content-mark"],[1,"box"],[1,"non-content-mark"],[1,"synonym"],[1,"antonym"],[1,"details"],[1,"examples"],["class","example",4,"ngFor","ngForOf"],[1,"example"],[1,"original",3,"dblclick"],["mat-icon-button","","color","primary",3,"click"],["fontIcon","add",1,"icon"],[1,"translation"],[1,"words"],[1,"title"],["class","word",3,"dblclick",4,"ngFor","ngForOf"],[1,"word",3,"dblclick"]],template:function(a,i){if(1&a&&(t._UZ(0,"div",0,1),t.TgZ(2,"div",2)(3,"mat-form-field",3)(4,"mat-label",4),t._uU(5,"Term"),t.qZA(),t.TgZ(6,"input",5),t.NdJ("keyup.enter",function(){return i.selectTermOption(i.searchControl.value)})("keyup",function(y){return y.stopPropagation()})("keydown",function(y){return y.stopPropagation()})("paste",function(){return i.paste()}),t.qZA(),t.TgZ(7,"mat-autocomplete",null,6),t.YNc(9,K,2,2,"mat-option",7),t.qZA()()(),t.YNc(10,Z,2,0,"div",8),t.YNc(11,R,2,1,"div",9),t.TgZ(12,"div",10),t.YNc(13,L,3,1,"button",11),t.YNc(14,N,3,2,"span",12),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.YNc(17,et,2,1,"div",13),t.YNc(18,st,4,1,"div",14)),2&a){const m=t.MAs(8);let y;t.xp6(6),t.Q6J("formControl",i.searchControl)("matAutocomplete",m),t.xp6(3),t.Q6J("ngForOf",i.termOptions),t.xp6(1),t.Q6J("ngIf",i.dictionaryIsEmpty),t.xp6(1),t.Q6J("ngIf",(null==i.partsOfSpeech?null:i.partsOfSpeech.length)&&i.partsOfSpeech.length>1),t.xp6(2),t.Q6J("ngIf",null==i.dictionaryTerm?null:i.dictionaryTerm.term),t.xp6(1),t.Q6J("ngIf",i.searchTerm.trim().toLowerCase()!==(null==i.dictionaryTerm||null==i.dictionaryTerm.term||null==(y=i.dictionaryTerm.term.trim())?null:y.toLowerCase())),t.xp6(2),t.hij(" ",null==i.dictionaryTerm?null:i.dictionaryTerm.term," "),t.xp6(1),t.Q6J("ngForOf",null==i.dictionaryTerm?null:i.dictionaryTerm.articles),t.xp6(1),t.Q6J("ngIf",i.words.length)}},dependencies:[x.ez,x.sg,x.O5,E.ot,E.RK,T.Ps,T.Hw,g.u5,g.Fj,g.JJ,O.Bb,O.XC,_.ey,O.ZL,d.lN,d.KE,d.hX,u.c,u.Nt,_.Ng,g.UX,g.oH],styles:["[_nghost-%COMP%]{display:block;padding:var(--padding-main);font-size:var(--dictionary-main-font-size)}.parts-of-speech[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.parts-of-speech[_ngcontent-%COMP%]   .part-of-speech[_ngcontent-%COMP%]{cursor:pointer;margin:4px}.parts-of-speech[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{outline:1px solid green}.header[_ngcontent-%COMP%]{font-size:var(--dictionary-header-font-size);font-weight:700;display:flex;flex-wrap:wrap;align-items:center;gap:8px}.header[_ngcontent-%COMP%]   .favorite-word-button[_ngcontent-%COMP%]{padding:8px 0 0;margin-right:-8px}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{line-height:1}.has-examples[_ngcontent-%COMP%]   .def-text[_ngcontent-%COMP%]{cursor:pointer}.article[_ngcontent-%COMP%]{margin:16px 0}.article[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]{margin:var(--padding-main) 0;line-height:2}.article[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .transcription[_ngcontent-%COMP%]{color:#000;margin:4px;padding:4px;background-color:#f9e79f}.article[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .dictionary[_ngcontent-%COMP%]{color:#000;margin:4px;padding:4px;background-color:#94ff7d}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]{margin:8px 0}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .content-mark[_ngcontent-%COMP%], .article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .non-content-mark[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;background-color:wheat;height:12px;width:12px;transform:translateY(-2px)}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .content-mark[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%], .article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .non-content-mark[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{height:8px;width:8px}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .content-mark[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background-color:green}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .lex-unit[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;background-color:wheat;color:#000;padding:2px}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{color:green;font-weight:700;background-color:wheat;padding:2px;margin-right:4px}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .synonym[_ngcontent-%COMP%]{color:green;padding-left:var(--padding-small)}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .antonym[_ngcontent-%COMP%]{color:red;padding-left:var(--padding-small)}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:var(--padding-small)}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .examples[_ngcontent-%COMP%]{padding-left:var(--padding-small);margin:8px 0}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .examples[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{display:flex;align-items:center}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .examples[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer}.article[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .examples[_ngcontent-%COMP%]   .translation[_ngcontent-%COMP%]{color:gray;padding-left:var(--padding-large)}.part-of-speech[_ngcontent-%COMP%]{font-weight:700;background-color:wheat;color:#000;padding:4px;margin:4px 0;cursor:pointer}.words[_ngcontent-%COMP%]{display:flex;gap:8px}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;gap:var(--padding-main);width:100%}.form-field[_ngcontent-%COMP%]{width:800px;max-width:90vw}.mat-label[_ngcontent-%COMP%]{color:gray!important}"],changeDetection:0}),A);B=(0,o.gn)([(0,v.c)()],B)},4861:(w,b,s)=>{s.d(b,{E:()=>g});var o=s(5619),t=s(2572),x=s(8180);function v(O,d){const u=d.index>=0?d.index:O.length+d.index;if(O.slice(u,u+d.pattern.length)!==d.pattern)return null;const _=O.length-(O.slice(0,d.index).length+d.pattern.length);let h=O.slice(0,d.index)+d.replace;return _>0&&(h+=O.slice(-1*_)),h}var E=s(5879),T=s(5071);let g=(()=>{class O{constructor(u){this.bookService=u,this.currentDictionaryState$=new o.X(null),this.minimalSearchPattern=2,this.maxNumberOfSearchResults=50,this.morphology={},this.morphologyReplaceRules=[],this.dictionaryIsEmpty=!0,this.morphologyIsEmpty=!0,this.searchTerm="",this.currentTerm="",this.terms=[],this.seeAlsoWords=[],(0,t.a)([this.bookService.getMorphology$(),this.bookService.getDictionaryTerms$(),this.bookService.getMorphologyReplaceRules$()]).pipe((0,x.q)(1)).subscribe(([_,h,l])=>{_?.morphology?(this.morphology=_.morphology,this.morphologyIsEmpty=!1):(this.morphology={},this.morphologyIsEmpty=!0),this.morphologyReplaceRules=l?.morphologyReplaceRules?l.morphologyReplaceRules:[],h.length?(this.terms=h,this.dictionaryIsEmpty=!1):this.dictionaryIsEmpty=!0,this.setDictionaryState(null),this.searchTerm&&this.setTerm(this.searchTerm)})}searchTerms(u){if(u.length<this.minimalSearchPattern)return null;const _=new RegExp(u.replaceAll("*",".+"),"iu");return this.terms.filter(h=>_.test(h)).slice(0,this.maxNumberOfSearchResults)}setTerm(u){if(this.searchTerm=u,this.currentTerm=u.trim().toLowerCase(),this.seeAlsoWords=[],this.setDictionaryState(null),this.morphologyReplaceRules.forEach(h=>{const l=v(this.currentTerm,h);l&&this.checkTerm(l)&&this.seeAlsoWords.push(l)}),!this.morphologyIsEmpty){const h=this.morphology[this.currentTerm];h?.o&&this.seeAlsoWords.push(h.o)}let _=this.checkTerm(this.currentTerm);if(_)this.setDictionaryState(_);else{if(!this.morphologyIsEmpty){const h=this.morphology[this.currentTerm];if(h?.o&&(_=this.checkTerm(h.o),_))return void this.setDictionaryState(_)}for(let h=0;h<this.morphologyReplaceRules.length;h++){const l=v(this.currentTerm,this.morphologyReplaceRules[h]);if(!l)continue;const f=this.checkTerm(l);if(f)return this.currentTerm=l,void this.setDictionaryState(f)}}}setDictionaryState(u){u?this.bookService.getDictionaryItem$(u).subscribe(_=>{this.currentDictionaryState$.next({currentDictionaryTerm:_,dictionaryIsEmpty:this.dictionaryIsEmpty,searchTerm:this.searchTerm,seeAlsoWords:this.seeAlsoWords})}):this.setNullState()}setNullState(){this.seeAlsoWords=[],this.currentDictionaryState$.next({currentDictionaryTerm:null,dictionaryIsEmpty:this.dictionaryIsEmpty,searchTerm:this.searchTerm,seeAlsoWords:this.seeAlsoWords})}checkTerm(u){return this.terms.includes(u)?u:""}}return O.\u0275fac=function(u){return new(u||O)(E.LFG(T.Z))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},3631:(w,b,s)=>{s.d(b,{j:()=>O});var o=s(5619),t=s(8180),x=s(2096),v=s(7772),E=s(5879),T=s(6280),g=s(957);let O=(()=>{class d{constructor(_,h){this.dbService=_,this.infoService=h,this.examples$=new o.X([]),this.sort=(l,f)=>(l.toDoTimestamp||0)-(f.toDoTimestamp||0),this.dbService.getAll(v.L.FavoriteExamples).pipe((0,t.q)(1)).subscribe(l=>{l.forEach(f=>f.showDetails=!1),l?(l.sort(this.sort),this.examples$.next(l)):this.examples$.next([])})}deleteAll(){return this.dbService.clear(v.L.FavoriteExamples)}import(_){const h=JSON.parse(_)?.favoriteExamples;if(!h?.length)return console.error("!examples?.length"),this.infoService.error("!examples?.length"),(0,x.of)([]);const l=this.examples$.value.map(P=>P.timestamp);function f(P){return l.includes(P)?f(P+1):P}return h.forEach(P=>{if(!P.timestamp){const A=f(Date.now());l.push(A),P.timestamp=A}}),this.dbService.bulkAdd(v.L.FavoriteExamples,h).pipe((0,t.q)(1))}addExample(_){const h=Date.now(),l={..._,timestamp:h,showDetails:!1};this.dbService.add(v.L.FavoriteExamples,l).pipe((0,t.q)(1)).subscribe();const f=[l,...this.examples$.value];this.examples$.next(f),this.infoService.show("added: "+_.original)}update(_){if(!_?.timestamp||!_.toDoTimestamp)return;const h=this.examples$.value,l=h.find(f=>f.timestamp===_.timestamp);l&&(l.toDoTimestamp=_.toDoTimestamp,l.updateTimestamp=Date.now(),this.dbService.update(v.L.FavoriteExamples,l).pipe((0,t.q)(1)).subscribe(),h.sort(this.sort),this.examples$.next(h))}removeExample(_){if(!_)return;this.dbService.delete(v.L.FavoriteExamples,_).pipe((0,t.q)(1)).subscribe();const h=this.examples$.value.filter(l=>l.timestamp!==_);this.examples$.next(h)}}return d.\u0275fac=function(_){return new(_||d)(E.LFG(T.ys),E.LFG(g.C))},d.\u0275prov=E.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},5591:(w,b,s)=>{s.d(b,{d:()=>u});var o=s(5619),t=s(4664),x=s(7398),v=s(8180),E=s(2096),T=s(7772),g=s(5879),O=s(6280),d=s(4861);let u=(()=>{class _{constructor(l,f){this.dbService=l,this.dictionaryService=f,this.check$=new o.X(null),this.dictionaryService.currentDictionaryState$.pipe((0,t.w)(P=>this.getWordFromDB(P?.currentDictionaryTerm?.term||""))).subscribe(P=>{this.check$.next(P)})}importWords(l){return this.dbService.bulkAdd(T.L.FavoriteWords,l.map(f=>({term:f,v:1})))}getAll(){return this.dbService.getAll(T.L.FavoriteWords).pipe((0,x.U)(l=>l.map(f=>f.term)),(0,v.q)(1))}switchCurrent(){const l=this.check$.value,f=l?.term,P=l?.status;f&&(P?this.remove(f):this.add(f),this.check$.next({term:f,status:!P}))}add(l){this.dbService.add(T.L.FavoriteWords,{term:l,v:"1"}).pipe((0,v.q)(1)).subscribe()}remove(l){this.dbService.delete(T.L.FavoriteWords,l).pipe((0,v.q)(1)).subscribe()}getWordFromDB(l){return l?this.dbService.getByID(T.L.FavoriteWords,l).pipe((0,x.U)(f=>({term:l,status:!!f}))):(0,E.of)({term:"",status:!1})}}return _.\u0275fac=function(l){return new(l||_)(g.LFG(O.ys),g.LFG(d.E))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},8299:(w,b,s)=>{s.d(b,{R:()=>x});const t=["\u2018","\u201c"," ",".",",","!","?",":",";","\t","\n","\r","'","`","\u2019",'"',"\\","/","[","]","(",")","{","}","-","\u2014","<",">"];function x(){const v=window.getSelection();if(!v)return"";const E=v.toString().trim();if(E)return E;const T=v.focusOffset,g=v.focusNode?.nodeValue;if(!g)return"";const O=g.split("");let d=function o(v,E,T){let g=E;for(;g--;)if(T(v[g],g,v))return g;return-1}(O,T,_=>t.includes(_));d=-1===d?0:d+1;let u=O.findIndex((_,h)=>t.includes(_)&&h>T);return-1===u&&(u=g.length),g.slice(d,u).trim()}},4630:(w,b,s)=>{s.d(b,{Bb:()=>nt,XC:()=>it,ZL:()=>W});var o=s(5879),t=s(3680),x=s(6814),v=s(799),E=s(3651),T=s(4300),g=s(2495),O=s(2831),d=s(6825),u=s(7394),_=s(8645),h=s(4911),l=s(3019),f=s(2096),P=s(2438),A=s(6028),U=s(8484),K=s(6223),Z=s(9157),Y=s(7921),R=s(4664),L=s(8180),F=s(2181),N=s(7398),j=s(9397),$=s(5177),H=s(9388);const J=["panel"];function V(p,M){if(1&p&&(o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA()),2&p){const e=M.id,n=o.oxw();o.Q6J("id",n.id)("ngClass",n._classList)("@panelAnimation",n.isOpen?"visible":"hidden"),o.uIk("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby(e))}}const Q=["*"],G=(0,d.X$)("panelAnimation",[(0,d.SB)("void, hidden",(0,d.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,d.eR)(":enter, hidden => visible",[(0,d.ru)([(0,d.jt)("0.03s linear",(0,d.oB)({opacity:1})),(0,d.jt)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,d.oB)({transform:"scaleY(1)"}))])]),(0,d.eR)(":leave, visible => hidden",[(0,d.jt)("0.075s linear",(0,d.oB)({opacity:0}))])]);let z=0;class X{constructor(M,e){this.source=M,this.option=e}}const q=(0,t.Kr)(class{}),k=new o.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function tt(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1}}});let et=(()=>{class p extends q{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._setThemeClasses(this._classList)}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,g.Ig)(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=(0,g.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,g.du)(e).reduce((n,c)=>(n[c]=!0,n),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}constructor(e,n,c,C){super(),this._changeDetectorRef=e,this._elementRef=n,this._defaults=c,this._activeOptionChanges=u.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new o.vpe,this.opened=new o.vpe,this.closed=new o.vpe,this.optionActivated=new o.vpe,this._classList={},this.id="mat-autocomplete-"+z++,this.inertGroups=C?.SAFARI||!1,this._autoActiveFirstOption=!!c.autoActiveFirstOption,this._autoSelectActiveOption=!!c.autoSelectActiveOption}ngAfterContentInit(){this._keyManager=new T.s1(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const n=new X(this,e);this.optionSelected.emit(n)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}_setThemeClasses(e){e["mat-primary"]="primary"===this._color,e["mat-warn"]="warn"===this._color,e["mat-accent"]="accent"===this._color}_skipPredicate(e){return e.disabled}}return p.\u0275fac=function(e){return new(e||p)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(k),o.Y36(O.t4))},p.\u0275dir=o.lG2({type:p,viewQuery:function(e,n){if(1&e&&(o.Gf(o.Rgc,7),o.Gf(J,5)),2&e){let c;o.iGM(c=o.CRH())&&(n.template=c.first),o.iGM(c=o.CRH())&&(n.panel=c.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[o.qOj]}),p})(),it=(()=>{class p extends et{constructor(){super(...arguments),this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=(0,g.Ig)(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}_skipPredicate(e){return!1}}return p.\u0275fac=function(){let M;return function(n){return(M||(M=o.n5z(p)))(n||p)}}(),p.\u0275cmp=o.Xpm({type:p,selectors:[["mat-autocomplete"]],contentQueries:function(e,n,c){if(1&e&&(o.Suo(c,t.K7,5),o.Suo(c,t.ey,5)),2&e){let C;o.iGM(C=o.CRH())&&(n.optionGroups=C),o.iGM(C=o.CRH())&&(n.options=C)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[o._Bn([{provide:t.HF,useExisting:p}]),o.qOj],ngContentSelectors:Q,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(e,n){1&e&&(o.F$t(),o.YNc(0,V,3,5,"ng-template"))},dependencies:[x.mk],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[G]},changeDetection:0}),p})();const r={provide:K.JU,useExisting:(0,o.Gpc)(()=>W),multi:!0},i=new o.OlP("mat-autocomplete-scroll-strategy"),y={provide:i,deps:[E.aV],useFactory:function m(p){return()=>p.scrollStrategies.reposition()}};let D=(()=>{class p{get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,g.Ig)(e)}constructor(e,n,c,C,S,ot,at,rt,lt,ct,_t){this._element=e,this._overlay=n,this._viewContainerRef=c,this._zone=C,this._changeDetectorRef=S,this._dir=at,this._formField=rt,this._document=lt,this._viewportRuler=ct,this._defaults=_t,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=u.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new _.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,h.P)(()=>{const I=this.autocomplete?this.autocomplete.options:null;return I?I.changes.pipe((0,Y.O)(I),(0,R.w)(()=>(0,l.T)(...I.map(pt=>pt.onSelectionChange)))):this._zone.onStable.pipe((0,L.q)(1),(0,R.w)(()=>this.optionSelections))}),this._handlePanelKeydown=I=>{(I.keyCode===A.hY&&!(0,A.Vb)(I)||I.keyCode===A.LH&&(0,A.Vb)(I,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),I.stopPropagation(),I.preventDefault())},this._trackedModal=null,this._scrollStrategy=ot}ngAfterViewInit(){const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,l.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,F.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,F.h)(()=>this._overlayAttached)):(0,f.of)()).pipe((0,N.U)(e=>e instanceof t.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,l.T)((0,P.R)(this._document,"click"),(0,P.R)(this._document,"auxclick"),(0,P.R)(this._document,"touchend")).pipe((0,F.h)(e=>{const n=(0,O.sA)(e),c=this._formField?this._formField._elementRef.nativeElement:null,C=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&n!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!c||!c.contains(n))&&(!C||!C.contains(n))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(n)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const n=e.keyCode,c=(0,A.Vb)(e);if(n===A.hY&&!c&&e.preventDefault(),this.activeOption&&n===A.K5&&this.panelOpen&&!c)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const C=this.autocomplete._keyManager.activeItem,S=n===A.LH||n===A.JH;n===A.Mf||S&&!c&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):S&&this._canOpen()&&this.openPanel(),(S||this.autocomplete._keyManager.activeItem!==C)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let n=e.target,c=n.value;"number"===n.type&&(c=""==c?null:parseFloat(c)),this._previousValue!==c&&(this._previousValue=c,this._pendingAutoselectedOption=null,this._onChange(c),c||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,L.q)(1)),n=this.autocomplete.options.changes.pipe((0,j.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,$.g)(0));return(0,l.T)(e,n).pipe((0,R.w)(()=>(this._zone.run(()=>{const c=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),c!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,L.q)(1)).subscribe(c=>this._setValueAndClose(c))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const n=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(n??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const n=e?e.source:this._pendingAutoselectedOption;n&&(this._clearPreviousSelectedOption(n),this._assignOptionValue(n.value),this._onChange(n.value),this.autocomplete._emitSelectEvent(n),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e,n){this.autocomplete&&this.autocomplete.options&&this.autocomplete.options.forEach(c=>{c!==e&&c.selected&&c.deselect(n)})}_attachOverlay(){let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new U.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const n=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&n!==this.panelOpen&&this.autocomplete.opened.emit()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new E.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],c=this._aboveClass,C=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:c},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:c}];let S;S="above"===this.position?C:"below"===this.position?n:[...n,...C],e.withPositions(S)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;if(e.autoActiveFirstOption){let n=-1;for(let c=0;c<e.options.length;c++)if(!e.options.get(c).disabled){n=c;break}e._keyManager.setActiveItem(n)}else e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const n=this.autocomplete,c=(0,t.CB)(e,n.options,n.optionGroups);if(0===e&&1===c)n._setScrollTop(0);else if(n.panel){const C=n.options.toArray()[e];if(C){const S=C._getHostElement(),ot=(0,t.jH)(S.offsetTop,S.offsetHeight,n._getScrollTop(),n.panel.nativeElement.offsetHeight);n._setScrollTop(ot)}}}_applyModalPanelOwnership(){const e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const n=this.autocomplete.id;this._trackedModal&&(0,T.iD)(this._trackedModal,"aria-owns",n),(0,T.Zf)(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){this._trackedModal&&((0,T.iD)(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}}return p.\u0275fac=function(e){return new(e||p)(o.Y36(o.SBq),o.Y36(E.aV),o.Y36(o.s_b),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(i),o.Y36(H.Is,8),o.Y36(Z.G_,9),o.Y36(x.K0,8),o.Y36(v.rL),o.Y36(k,8))},p.\u0275dir=o.lG2({type:p,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[o.TTD]}),p})(),W=(()=>{class p extends D{constructor(){super(...arguments),this._aboveClass="mat-mdc-autocomplete-panel-above"}}return p.\u0275fac=function(){let M;return function(n){return(M||(M=o.n5z(p)))(n||p)}}(),p.\u0275dir=o.lG2({type:p,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(e,n){1&e&&o.NdJ("focusin",function(){return n._handleFocus()})("blur",function(){return n._onTouched()})("input",function(C){return n._handleInput(C)})("keydown",function(C){return n._handleKeydown(C)})("click",function(){return n._handleClick()}),2&e&&o.uIk("autocomplete",n.autocompleteAttribute)("role",n.autocompleteDisabled?null:"combobox")("aria-autocomplete",n.autocompleteDisabled?null:"list")("aria-activedescendant",n.panelOpen&&n.activeOption?n.activeOption.id:null)("aria-expanded",n.autocompleteDisabled?null:n.panelOpen.toString())("aria-controls",n.autocompleteDisabled||!n.panelOpen||null==n.autocomplete?null:n.autocomplete.id)("aria-haspopup",n.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[o._Bn([r]),o.qOj]}),p})(),nt=(()=>{class p{}return p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=o.oAB({type:p}),p.\u0275inj=o.cJS({providers:[y],imports:[E.U8,t.Ng,t.BQ,x.ez,v.ZD,t.Ng,t.BQ]}),p})()}}]);