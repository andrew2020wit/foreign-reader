import{a as J}from"./chunk-BU7NXH7X.js";import{a as x,b as M,c as I}from"./chunk-W6XQCXRA.js";import{a as U}from"./chunk-WS4K4M4L.js";import{b as W}from"./chunk-J4BUEHZN.js";import{p as N}from"./chunk-EDACHHSA.js";import{a as T}from"./chunk-DELQYH7M.js";import{D as g,Ga as j,Hb as H,Ka as _,Qa as R,Sa as L,Ta as D,Ua as A,Va as r,Wa as a,Xa as z,Za as S,_ as h,ab as m,cb as w,ec as y,fa as d,ga as u,lb as P,ma as V,mb as l,mc as $,ob as O,rd as C,td as b,va as c,vb as k,wa as f,xb as E}from"./chunk-OUFBJRPP.js";var q="2.26.1";var G="https://github.com/andrew2020wit/foreign-reader";function K(n){let v=n.split(`
`),i=[],e=1,t={index:""};for(let o=0;o<v.length;o++){let s=v[o];if(!s){e=0,t.index&&(i.push(t),t={}),e++;continue}if(e===1){t.index=s,e++;continue}if(e===2){t.time=s,e++;continue}t.text=t.text?t.text+s:s}return i}var Z=(()=>{class n{constructor(i,e){this.loader=i,this.exportImportService=e,this.update=new V}readJSONFile(i){let e=i?.target?.files[0];if(!e)return;let t=new FileReader;t.onload=o=>{let s=o?.target?.result;if(!s)return;let p=this.exportImportService.importJsonText(s);p&&(this.loader.start(),p.pipe(g(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},t.readAsText(e)}readTxtFile(i){let e=i?.target?.files[0];if(!e)return;let t=new FileReader;t.onload=o=>{let s=o?.target?.result;if(!s)return;let p=this.exportImportService.importTextFile(s,e.name);p&&(this.loader.start(),p.pipe(g(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},t.readAsText(e)}readSrtFile(i){let e=i?.target?.files[0];if(!e)return;let t=new FileReader;t.onload=o=>{let s=o?.target?.result;if(!s)return;let p="";K(s).forEach(B=>{p+=B.time?.slice(0,5)+" "+B.text+`
`});let F=this.exportImportService.importTextFile(p,e.name);F&&(this.loader.start(),F.pipe(g(1)).subscribe(()=>{this.update.emit(),this.loader.stop()}))},t.readAsText(e)}static{this.\u0275fac=function(e){return new(e||n)(f(T),f(I))}}static{this.\u0275cmp=h({type:n,selectors:[["app-import-book"]],outputs:{update:"update"},standalone:!0,features:[k],decls:16,vars:0,consts:[["jsonFileInput",""],["textFileInput",""],["srtFileInput",""],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"click"],[1,"copyright"],["type","file","accept",".json",1,"hidden-file-input",3,"change"],["type","file","accept",".txt",1,"hidden-file-input",3,"change"],["type","file","accept",".srt",1,"hidden-file-input",3,"change"]],template:function(e,t){if(e&1){let o=S();r(0,"mat-card")(1,"div",3)(2,"button",4),m("click",function(){d(o);let p=P(13);return u(p.click())}),l(3," Open a plain txt-file (UTF-8) "),a(),r(4,"button",4),m("click",function(){d(o);let p=P(15);return u(p.click())}),l(5," Open a srt-file (subtitles, UTF-8) "),a(),r(6,"button",4),m("click",function(){d(o);let p=P(11);return u(p.click())}),l(7," Import a book from json-file "),a()(),r(8,"div",5),l(9," Copyright (c) 2023-2024 Andrii Faurash "),a()(),r(10,"input",6,0),m("change",function(p){return d(o),u(t.readJSONFile(p))}),a(),r(12,"input",7,1),m("change",function(p){return d(o),u(t.readTxtFile(p))}),a(),r(14,"input",8,2),m("change",function(p){return d(o),u(t.readSrtFile(p))}),a()}},dependencies:[b,C,M,x],styles:[".create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}.hidden-file-input[_ngcontent-%COMP%]{display:none}.copyright[_ngcontent-%COMP%]{padding:var(--padding-main);width:100%;box-sizing:border-box;text-align:center;font-size:10px;color:gray}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"],changeDetection:0})}}return n})();var nt=n=>["/edit-book-header",n],ot=n=>["/book",n];function rt(n,v){if(n&1){let i=S();r(0,"div",4)(1,"div",5)(2,"button",6),m("click",function(){let t=d(i).$implicit,o=w(2);return u(o.delete(t.id))}),l(3,"Delete"),a(),r(4,"button",7),m("click",function(){let t=d(i).$implicit,o=w(2);return u(o.export(t))}),l(5,"Export"),a(),r(6,"button",8),l(7,"Edit Title"),a()(),r(8,"button",9),l(9),a()()}if(n&2){let i=v.$implicit;c(6),_("routerLink",E(3,nt,i.id)),c(2),_("routerLink",E(5,ot,i.id)),c(),O(" ",i.title," ")}}function at(n,v){if(n&1&&(r(0,"mat-card",0)(1,"div",2)(2,"div",3),D(3,rt,10,7,"div",4,L),a()()()),n&2){let i=w();c(3),A(i.booksTitles)}}var tt=(()=>{class n{constructor(i,e,t,o,s){this.bookService=i,this.loader=e,this.infoService=t,this.cd=o,this.exportImportService=s,this.booksTitles=[]}ngOnInit(){this.loader.topOn(),this.cd.detectChanges(),this.setTitles()}setTitles(){this.loader.topOn(),this.bookService.getAllTitles$().pipe(g(1)).subscribe({next:i=>{this.booksTitles=i,this.booksTitles.sort((e,t)=>(t.lastOpenedTime||0)-(e.lastOpenedTime||0)),this.cd.detectChanges(),this.loader.topOff()},error:i=>{this.loader.topOff(),console.error(i),this.cd.detectChanges()}})}delete(i){this.loader.topOn(),this.bookService.delete$(i).pipe(g(1)).subscribe({next:()=>{this.infoService.show("Book is deleted"),this.setTitles(),this.loader.topOff()},error:e=>{this.infoService.error("Book is not deleted"),console.error(e),this.loader.topOff()}})}export(i){this.exportImportService.export(i.id)}update(){this.setTitles()}static{this.\u0275fac=function(e){return new(e||n)(f($),f(T),f(N),f(H),f(I))}}static{this.\u0275cmp=h({type:n,selectors:[["app-books"]],standalone:!0,features:[k],decls:2,vars:1,consts:[[1,"books-block"],[3,"update"],[1,"list-wrapper"],[1,"list"],[1,"list-item"],[1,"buttons"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","primary",1,"title",3,"routerLink"]],template:function(e,t){e&1&&(j(0,at,5,0,"mat-card",0),r(1,"app-import-book",1),m("update",function(){return t.update()}),a()),e&2&&R(t.booksTitles!=null&&t.booksTitles.length?0:-1)},dependencies:[M,x,y,b,C,Z],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%], [_nghost-%COMP%]   .import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:fit-content}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;gap:8px;width:fit-content;margin:var(--padding-small)}@media (max-width: 600px){[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .books-block[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main)}"]})}}return n})();var Rt=(()=>{class n{constructor(){this.appVersion=q,this.RoutesEnum=J,this.appTitle=U}goToHomeSite(){window.open(G,"_blank")}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=h({type:n,selectors:[["app-home"]],standalone:!0,features:[k],decls:20,vars:7,consts:[[1,"home-header"],["mat-button","","color","primary",3,"click"],[1,"app-title"],["mat-button","","color","primary",3,"routerLink"],[1,"create-import-block"],["mat-button","","color","primary",1,"link-item",3,"routerLink"],[1,"books"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"button",1),m("click",function(){return t.goToHomeSite()}),l(2," About "),a(),r(3,"div",2),l(4),r(5,"span"),l(6),a()(),r(7,"button",3),l(8," Settings "),a()(),r(9,"mat-card")(10,"div",4)(11,"button",5),l(12," Dictionary Viewer "),a(),r(13,"button",5),l(14," Favorite Words "),a(),r(15,"button",5),l(16," Favorite Examples "),a(),r(17,"button",5),l(18," Create an example "),a()()(),z(19,"app-books",6)),e&2&&(c(4),O(" ",t.appTitle," "),c(2),O(" (v ",t.appVersion,") "),c(),_("routerLink","/"+t.RoutesEnum.Settings),c(4),_("routerLink","/"+t.RoutesEnum.DictionaryViewer),c(2),_("routerLink","/"+t.RoutesEnum.FavoriteWords),c(2),_("routerLink","/"+t.RoutesEnum.FavoriteExamples),c(2),_("routerLink","/"+t.RoutesEnum.CreateExample))},dependencies:[b,C,y,tt,M,x,W],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--padding-main)}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.home-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.create-import-block[_ngcontent-%COMP%]{padding:var(--padding-main);margin-top:var(--padding-main)}.create-import-block[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{margin-top:var(--padding-main);width:100%}"]})}}return n})();export{Rt as HomeComponent};
