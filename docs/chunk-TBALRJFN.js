import{a as G,b as H}from"./chunk-IEF4MG5S.js";import{b as L}from"./chunk-TCV6CCDI.js";import{i as R,j as K}from"./chunk-UQ3C3MZ7.js";import{c as q,d as b}from"./chunk-WTAM2NIL.js";import{a as J}from"./chunk-I2K33PV5.js";import{a as A}from"./chunk-LSYSMSWF.js";import"./chunk-UBMR2UBB.js";import"./chunk-7CLDBU2A.js";import{p as j}from"./chunk-QGR5JL6C.js";import{Ba as k,Cb as B,Ga as u,La as M,Na as O,Pb as U,Qb as z,Ra as x,Ua as F,Va as S,Wa as a,Xa as r,Xc as Q,Ya as D,Yc as W,_a as E,aa as s,ab as v,ac as N,ba as d,bb as p,fb as V,gb as I,hb as $,j as P,lb as m,mb as f,nb as _,ob as w,ta as o,xa as g,xb as y,zb as h}from"./chunk-5LRB2IYA.js";var Y=["componentContent"];function Z(n,t){if(n&1&&(a(0,"span",20),m(1),r()),n&2){let e=p().$implicit;o(),f(e.level)}}function ee(n,t){if(n&1&&(a(0,"div",23),m(1),r()),n&2){let e=p(2).$implicit;o(),_(" ",e.transcription," ")}}function te(n,t){if(n&1&&(a(0,"div",25),m(1),r()),n&2){let e=p(2).$implicit;o(),_(" Synonym: ",e.synonym," ")}}function ie(n,t){if(n&1&&(a(0,"div",26),m(1),r()),n&2){let e=p(2).$implicit;o(),_(" Antonym: ",e.antonym," ")}}function ne(n,t){if(n&1&&(a(0,"div",27),m(1),r()),n&2){let e=p(2).$implicit;o(),_(" ",e.translation," ")}}function oe(n,t){if(n&1&&(a(0,"span"),m(1),y(2,"date"),r()),n&2){let e=p(2).$implicit;o(),_("U: ",h(2,1,e.updateTimestamp,"dd.MM.yyyy"),";")}}function ae(n,t){if(n&1&&(a(0,"span"),m(1),y(2,"date"),r()),n&2){let e=p(2).$implicit;o(),_("ToDo: ",h(2,1,e.toDoTimestamp,"dd.MM.yyyy"),"")}}function re(n,t){if(n&1&&(a(0,"div",22),u(1,ee,2,1,"div",23),a(2,"div",24),m(3),r(),u(4,te,2,1,"div",25)(5,ie,2,1,"div",26)(6,ne,2,1,"div",27),a(7,"div",28)(8,"span"),m(9),y(10,"date"),r(),u(11,oe,3,4,"span")(12,ae,3,4,"span"),r()()),n&2){let e=p().$implicit;o(),x(e.transcription?1:-1),o(2),_(" ",e.definition," "),o(),x(e.synonym?4:-1),o(),x(e.antonym?5:-1),o(),x(e.translation?6:-1),o(3),_(" C: ",h(10,8,e.timestamp,"dd.MM.yyyy"),"; "),o(2),x(e.updateTimestamp?11:-1),o(),x(e.toDoTimestamp?12:-1)}}function le(n,t){if(n&1){let e=E();a(0,"div",9)(1,"div",10)(2,"span",11),m(3),r(),a(4,"button",12),v("click",function(){let l=s(e).$implicit,c=p();return d(c.favoriteExamplesService.removeExample(l.timestamp||0))}),m(5," Del "),r(),a(6,"button",13),v("click",function(){let l=s(e).$implicit,c=p();return d(c.setToDo(l,1))}),m(7," 1 "),r(),a(8,"button",14),v("click",function(){let l=s(e).$implicit,c=p();return d(c.setToDo(l,3))}),m(9," 3 "),r(),a(10,"button",15),v("click",function(){let l=s(e).$implicit,c=p();return d(c.setToDo(l,7))}),m(11," 7 "),r(),a(12,"button",16),v("click",function(){let l=s(e).$implicit,c=p();return d(c.setToDo(l,30))}),m(13," 30 "),r(),a(14,"span",17),m(15),r(),a(16,"span",18),m(17),r()(),a(18,"div",19),v("click",function(){let l=s(e).$implicit;return d(l.showDetails=!0)}),u(19,Z,2,1,"span",20),a(20,"span",21),v("click",function(){s(e);let l=p();return d(l.clickOnWord())}),m(21),r()(),u(22,re,13,11,"div",22),r()}if(n&2){let e=t.$implicit,i=p();O("old",i.dayFromUpdate(e)>25)("recent",i.dayFromUpdate(e)<3),o(2),M("matTooltip","dayFromCreate/Update"),o(),w(" [ ",i.dayFromCreate(e)," : ",i.dayFromUpdate(e),"] "),o(12),f(e.partOfSpeech||""),o(2),f(e.term||""),o(2),x(e.level?19:-1),o(2),_(" ",e.original," "),o(),x(e.showDetails?22:-1)}}var X=class T{constructor(t,e,i){this.favoriteExamplesService=t,this.cd=e,this.customStylesService=i,this.dayTime=24*36e5,this.examples=[],this.allExamplesNumber=0,this.todoExampleNumber=0,this.currentTerm=""}ngOnInit(){this.favoriteExamplesService.examples$.pipe(b(this)).subscribe(t=>{this.allExamplesNumber=t?.length||0,this.takeCurrentExamples(t)})}ngAfterViewInit(){this.subscribeToCustomStylesService(),this.subscribeToKeyBord()}clickOnWord(){this.currentTerm=R()}subscribeToCustomStylesService(){this.customStylesService.customStyles$.pipe(b(this)).subscribe(t=>{t.forEach(e=>{this.componentContent.nativeElement.style.setProperty(e.cssVariable,e.value)}),this.cd.detectChanges()})}subscribeToKeyBord(){document.onkeydown=t=>{let e=t?.key,i=this.examples[0];switch(e){case"d":this.favoriteExamplesService.removeExample(i.timestamp||0);break;case" ":i.showDetails=!i.showDetails,this.cd.detectChanges();break;case"w":this.setToDo(i,7);break;case"q":this.setToDo(i,30);break;case"s":this.setToDo(i,3);break;case"a":this.setToDo(i,1);break}}}trackBy(t,e){return e.timestamp}setToDo(t,e){t.toDoTimestamp=Date.now()+e*this.dayTime,this.favoriteExamplesService.update(t)}dayFromUpdate(t){return t.timestamp?Math.round((Date.now()-(t.updateTimestamp||t.timestamp))/this.dayTime):0}dayFromCreate(t){return t.timestamp?Math.round((Date.now()-t.timestamp)/this.dayTime):0}exampleIsToDo(t){return t.toDoTimestamp?t.toDoTimestamp<Date.now()+12*36e5:!0}takeCurrentExamples(t){let e=t.filter(i=>this.exampleIsToDo(i));this.todoExampleNumber=e.length,this.examples=e.sort((i,l)=>this.dayFromUpdate(l)-this.dayFromUpdate(i)).slice(0,20)}static{this.\u0275fac=function(e){return new(e||T)(g(A),g(B),g(J))}}static{this.\u0275cmp=k({type:T,selectors:[["app-favorite-examples"]],viewQuery:function(e,i){if(e&1&&V(Y,5),e&2){let l;I(l=$())&&(i.componentContent=l.first)}},decls:12,vars:3,consts:[["componentContent",""],[1,"component-content",3,"keydown.space","keyup.space"],[1,"list"],[1,"header"],["mat-button","","color","primary","routerLink","/"],[1,"example-number"],[1,"example",3,"old","recent"],[1,"dictionary"],[3,"term"],[1,"example"],[1,"example-header"],[1,"day-from-update",3,"matTooltip"],["mat-button","","color","warn","matTooltip","d",3,"click"],["mat-button","","color","primary","matTooltip","a",3,"click"],["mat-button","","color","primary","matTooltip","s",3,"click"],["mat-button","","color","primary","matTooltip","w",3,"click"],["mat-button","","color","primary","matTooltip","q",3,"click"],[1,"pos"],[1,"term"],[1,"original",3,"click"],[1,"level"],[1,"example-text",3,"click"],[1,"description"],[1,"transcription"],[1,"definition"],[1,"synonym"],[1,"antonym"],[1,"translation"],[1,"dates"]],template:function(e,i){if(e&1){let l=E();a(0,"div",1,0),v("keydown.space",function(C){return s(l),C.preventDefault(),d(C.stopPropagation())})("keyup.space",function(C){return s(l),C.preventDefault(),d(C.stopPropagation())}),a(2,"div",2)(3,"div",3)(4,"button",4),m(5,"Go Home"),r(),a(6,"span",5),m(7),r()(),F(8,le,23,12,"div",6,i.trackBy,!0),r(),a(10,"div",7),D(11,"app-dictionary-widget",8),r()()}e&2&&(o(7),w(" ",i.todoExampleNumber," / ",i.allExamplesNumber," "),o(),S(i.examples),o(3),M("term",i.currentTerm))},dependencies:[z,U,W,Q,N,L,j,H,G,K],styles:[".component-content[_ngcontent-%COMP%]{display:flex;gap:var(--padding-small);justify-content:end;padding:0;width:100vw;max-width:100vw;height:calc(100vh - 4px);max-height:calc(100vh - 4px);overflow:auto;box-sizing:border-box;background:var(--background-color-main);background-image:var(--book-background-image);background-repeat:repeat;font-family:var(--font-family);color:var(--font-color-main)}.list[_ngcontent-%COMP%]{padding:var(--padding-main);max-width:var(--max-book-width);width:var(--max-book-width);max-height:calc(100vh - 10px);overflow:hidden;box-sizing:border-box}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]{padding:var(--padding-small);outline:1px solid gray;margin:var(--padding-small)}.list[_ngcontent-%COMP%]   .example.old[_ngcontent-%COMP%]{outline:1px solid red}.list[_ngcontent-%COMP%]   .example.recent[_ngcontent-%COMP%]{outline:1px solid green}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .example-header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:var(--padding-main)}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .example-header[_ngcontent-%COMP%]   .pos[_ngcontent-%COMP%]{color:var(--font-color-translation)}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .example-header[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]{font-weight:700}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{cursor:pointer;margin-top:var(--padding-small);font-size:var(--font-size-original-text)}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{color:green;font-weight:700;background-color:wheat;padding:2px}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:var(--font-size-translation-text);padding-left:var(--padding-main)}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:var(--padding-small) 0}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .synonym[_ngcontent-%COMP%]{color:var(--font-color-translation)}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .antonym[_ngcontent-%COMP%]{color:red}.list[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%]{display:flex;gap:var(--padding-small);font-size:12px}.dictionary[_ngcontent-%COMP%]{overflow:auto;width:var(--dictionary-width)}@media (max-width: 1000px){.dictionary[_ngcontent-%COMP%]{display:none}}"]})}};X=P([q()],X);export{X as FavoriteExamplesComponent};
